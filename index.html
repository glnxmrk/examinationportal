<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quarter Examination - Secure Portal</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a237e">
    <link rel="apple-touch-icon" href="icon-512.png">

    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary-color: #2e7d32;
            /* Rich Green */
            --secondary-color: #1b5e20;
            /* Dark Green */
            --accent-color: #fbc02d;
            /* Yellow Gold */
            --bg-color: #1b5e20;
            --text-color: #333;
            --white: #ffffff;
            --error-color: #d32f2f;
            --success-color: #388e3c;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            /* Disable text selection to prevent copying */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Outfit', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a261a 0%, #1b5e20 40%, #fbc02d 100%);
            background-attachment: fixed;
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            touch-action: auto;
        }

        .container {
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
            overflow-y: auto;
        }

        h1,
        h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
        }

        .btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            margin-top: 1rem;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn:active {
            transform: scale(0.98);
        }

        /* Exam Proper Styles */
        #exam-section,
        #result-section,
        #already-submitted-section,
        #teacher-login-section,
        #teacher-dashboard-section,
        #reg-section {
            display: none;
        }

        .portal-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 2rem;
        }

        .role-card {
            padding: 2.5rem 1.5rem;
            border: 2px solid #eee;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .role-card:hover {
            border-color: var(--accent-color);
            background: #fffdf0;
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .role-icon {
            font-size: 3.5rem;
            margin-bottom: 1.2rem;
            display: block;
            transition: transform 0.3s;
        }

        .role-card:hover .role-icon {
            transform: scale(1.1);
        }

        /* Dashboard Styles */
        .q-list-item {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .q-actions {
            display: flex;
            gap: 10px;
        }

        .badge-btn {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            border: none;
        }

        .edit-btn {
            background: #ff9800;
            color: white;
        }

        .del-btn {
            background: #f44336;
            color: white;
        }

        .timer-container {
            text-align: right;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--error-color);
            margin-bottom: 1rem;
        }

        .question-card {
            margin-bottom: 1.5rem;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.8rem;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            background-color: #f0f4ff;
            border-color: var(--primary-color);
        }

        .option-label input {
            margin-right: 1rem;
            transform: scale(1.2);
        }

        .warning-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            text-align: center;
            padding: 2rem;
        }

        .lock-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .modal-content {
            width: 90%;
            max-width: 600px;
            background: var(--white);
            padding: 2.2rem;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: modalSlide 0.3s ease-out;
        }

        /* Toggle Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 22px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--success-color);
        }

        input:focus+.slider {
            box-shadow: 0 0 1px var(--success-color);
        }

        input:checked+.slider:before {
            transform: translateX(18px);
        }

        @keyframes modalSlide {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Mobile Adjustments */
        @media (max-width: 480px) {

            .container,
            .modal-content {
                padding: 1.5rem;
                width: 95%;
            }

            h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <!-- Portal Selection -->
    <div id="portal-section" class="container" style="border-top: 8px solid var(--accent-color); display: none;">
        <h1 style="background: linear-gradient(90deg, var(--secondary-color), var(--primary-color)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-size: 2rem; margin-bottom: 0.5rem;">
            San Jose Integrated School</h1>
        <h2 style="font-size: 1.2rem; color: #555; margin-bottom: 2rem;">Examination Portal</h2>
        <p style="text-align: center; color: #888; margin-bottom: 2rem; font-size: 0.9rem;">Empowering futures through
            secure assessment</p>
        <div class="portal-cards">
            <div class="role-card" onclick="showStudentLogin()">
                <div class="role-icon">üéì</div>
                <h3 style="color: var(--secondary-color);">I am a Student</h3>
                <p style="font-size: 0.85rem; color: #666; margin-top: 8px;">Begin your assessment</p>
            </div>
            <div class="role-card" onclick="showTeacherLogin()">
                <div class="role-icon">üë®‚Äçüè´</div>
                <h3 style="color: var(--secondary-color);">I am a Teacher</h3>
                <p style="font-size: 0.85rem; color: #666; margin-top: 8px;">Administer Exams</p>
            </div>
        </div>
    </div>

    <!-- Teacher Login Section -->
    <div id="teacher-login-section" class="container" style="display: none;">
        <button onclick="showPortal()" style="background:none; border:none; cursor:pointer; color: var(--primary-color); font-weight: bold; margin-bottom: 1rem;">‚Üê
            Back</button>
        <h2>Teacher Access</h2>
        <div class="form-group">
            <label for="teacherPasscode">Access Code</label>
            <input type="password" id="teacherPasscode" placeholder="Enter secret code" style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 6px;">
        </div>
        <button class="btn" onclick="verifyTeacher()">Enter Dashboard</button>
        <p id="teacher-auth-error" style="color: var(--error-color); font-size: 0.9rem; margin-top: 1rem; text-align: center; display: none;">
            Invalid access code.</p>
    </div>

    <!-- Teacher Dashboard Section -->
    <div id="teacher-dashboard-section" class="container" style="max-width: 900px; display: block;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h2>Dashboard</h2>
            <button class="badge-btn" style="background-color: #666; color: white;" onclick="showPortal()">Logout</button>
        </div>

        <div style="display: grid; grid-template-columns: 300px 1fr; gap: 20px;">
            <!-- Subject List Side -->
            <div style="background: #f9f9f9; padding: 1rem; border-radius: 8px; border: 1px solid #ddd;">
                <h3 style="font-size: 1rem; margin-bottom: 1rem; display: flex; justify-content: space-between;">
                    Subjects
                    <button class="badge-btn" style="background: var(--primary-color); color: white;" onclick="promptAddSubject()">+ Add</button>
                </h3>
                <div id="subject-list">
                    <div class="subject-item" style="padding: 1rem; border: 1px solid #eee; 
                        background: white; border-radius: 8px; margin-bottom: 10px; cursor: pointer;
                        box-shadow: none; transition: all 0.2s;" onclick="selectSubject('sub_1768821277913')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <strong style="font-size: 0.95rem; display: block; margin-bottom: 2px;">General Knowledge</strong>
                                <span style="font-size: 0.75rem; color: var(--success-color); font-weight: 600;">Active</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <label class="switch" onclick="event.stopPropagation();">
                                    <input type="checkbox" checked="" onchange="toggleSubjectStatus('sub_1768821277913')">
                                    <span class="slider"></span>
                                </label>
                                <button class="badge-btn del-btn" style="padding: 4px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); deleteSubject('sub_1768821277913')">Delete</button>
                            </div>
                        </div>
                    </div>
                
                    <div class="subject-item" style="padding: 1rem; border: 1px solid #eee; 
                        background: white; border-radius: 8px; margin-bottom: 10px; cursor: pointer;
                        box-shadow: none; transition: all 0.2s;" onclick="selectSubject('sub_1768821306849')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <strong style="font-size: 0.95rem; display: block; margin-bottom: 2px;">Personal Development</strong>
                                <span style="font-size: 0.75rem; color: var(--success-color); font-weight: 600;">Active</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <label class="switch" onclick="event.stopPropagation();">
                                    <input type="checkbox" checked="" onchange="toggleSubjectStatus('sub_1768821306849')">
                                    <span class="slider"></span>
                                </label>
                                <button class="badge-btn del-btn" style="padding: 4px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); deleteSubject('sub_1768821306849')">Delete</button>
                            </div>
                        </div>
                    </div>
                
                    <div class="subject-item" style="padding: 1rem; border: 1px solid #eee; 
                        background: white; border-radius: 8px; margin-bottom: 10px; cursor: pointer;
                        box-shadow: none; transition: all 0.2s;" onclick="selectSubject('sub_1768825675494')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <strong style="font-size: 0.95rem; display: block; margin-bottom: 2px;">Practical Research I</strong>
                                <span style="font-size: 0.75rem; color: var(--success-color); font-weight: 600;">Active</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <label class="switch" onclick="event.stopPropagation();">
                                    <input type="checkbox" checked="" onchange="toggleSubjectStatus('sub_1768825675494')">
                                    <span class="slider"></span>
                                </label>
                                <button class="badge-btn del-btn" style="padding: 4px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); deleteSubject('sub_1768825675494')">Delete</button>
                            </div>
                        </div>
                    </div>
                
                    <div class="subject-item" style="padding: 1rem; border: 1px solid var(--primary-color); 
                        background: #f0f4ff; border-radius: 8px; margin-bottom: 10px; cursor: pointer;
                        box-shadow: 0 4px 12px rgba(26, 35, 126, 0.1); transition: all 0.2s;" onclick="selectSubject('sub_1768829089450')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <strong style="font-size: 0.95rem; display: block; margin-bottom: 2px;">H.O.P.E. 4</strong>
                                <span style="font-size: 0.75rem; color: var(--error-color); font-weight: 600;">Hidden</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <label class="switch" onclick="event.stopPropagation();">
                                    <input type="checkbox" onchange="toggleSubjectStatus('sub_1768829089450')">
                                    <span class="slider"></span>
                                </label>
                                <button class="badge-btn del-btn" style="padding: 4px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); deleteSubject('sub_1768829089450')">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subject Settings Area -->
                <div id="subject-settings-panel" style="margin-top: 1.5rem; padding: 1rem; background: rgb(255, 255, 255); border-radius: 8px; border: 1px solid rgb(221, 221, 221); display: block;">
                    <h4 style="font-size: 0.85rem; margin-bottom: 0.8rem; color: #444;">Subject Settings</h4>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.75rem; color: #666; display: block; margin-bottom: 4px;">Exam
                            Duration (minutes)</label>
                        <input type="number" id="sub-duration" min="1" max="300" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem;">
                    </div>
                    <button class="badge-btn" style="width: 100%; background: var(--secondary-color); color: white;" onclick="updateSubjectSettings()">Save Settings</button>
                    <p id="settings-feedback" style="font-size: 0.7rem; color: var(--success-color); margin-top: 5px; display: none;">Settings
                        saved!</p>
                </div>
            </div>

            <!-- Questions Area -->
            <div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3 id="current-subject-title" style="font-size: 1rem;">Subject: H.O.P.E. 4</h3>
                    <button id="add-q-btn" class="badge-btn" style="background: var(--primary-color); color: white; display: block;" onclick="showQuestionForm()">+ Add Question</button>
                </div>
                <div id="question-list-container">
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>1. What is the primary purpose of a tent?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: To store food away from animals, To provide portable shelter during outdoor activities, To mark camping territory, To serve as a cooking area | <span style="color: var(--success-color); font-weight:bold;">Ans: To provide portable shelter during outdoor activities</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(0)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(0)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>2. Which tent type would be most suitable for a solo hiker concerned about weight and stealth camping?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Ridge Tent, Dome Tent, Bivy Tent, Tunnel Tent | <span style="color: var(--success-color); font-weight:bold;">Ans: Bivy Tent</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(1)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(1)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>3. A family of five plans a car camping trip in rainy weather. Which tent should they avoid?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Geodesic Tent, Tunnel Tent, Dome Tent (large size), Ridge Tent | <span style="color: var(--success-color); font-weight:bold;">Ans: Tunnel Tent</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(2)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(2)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>4. What is a common disadvantage of Ridge/A-Frame Tents?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Too spacious, Poor rain resistance, Lack of headroom, Difficult to pack | <span style="color: var(--success-color); font-weight:bold;">Ans: Lack of headroom</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(3)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(3)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>5. If you are camping in an area with strong winds, which tent design would provide the best stability due to its pole structure?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Dome Tent, Geodesic Tent, Tunnel Tent, Bivy Tent | <span style="color: var(--success-color); font-weight:bold;">Ans: Geodesic Tent</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(4)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(4)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>6. Why are Dome Tents considered unstable in larger sizes?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: They use too many poles, Their curved structure spreads tension unevenly, They lack guy lines, They are made of heavy material | <span style="color: var(--success-color); font-weight:bold;">Ans: Their curved structure spreads tension unevenly</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(5)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(5)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>7. What is the correct first step in pitching a tent?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Hammer in tent pegs, Lay down an earth pad, Unpack tent supplies, Insert poles through the frame | <span style="color: var(--success-color); font-weight:bold;">Ans: Unpack tent supplies</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(6)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(6)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>8. You have to camp on soft, sandy ground. Which step in tent pitching should be modified?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Use longer tent pegs or anchors, Skip the rain fly, Insert poles after raising tent, Omit earth pad | <span style="color: var(--success-color); font-weight:bold;">Ans: Use longer tent pegs or anchors</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(7)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(7)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>9. Which feature is NOT typically desirable in a Bivy Tent?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Lightweight, Large porch area, Built-in bug net, Good ventilation | <span style="color: var(--success-color); font-weight:bold;">Ans: Large porch area</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(8)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(8)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>10. Which tent type is described as 'essentially a dome tent but with more poles'?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Tunnel Tent, Geodesic Tent, Ridge Tent, Bivy Tent | <span style="color: var(--success-color); font-weight:bold;">Ans: Geodesic Tent</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(9)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(9)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>11. Which knot is known as a stopper knot and is used in sailing and climbing?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Sheet Bend, Figure-of-Eight Knot, Square Knot, Slip Knot | <span style="color: var(--success-color); font-weight:bold;">Ans: Figure-of-Eight Knot</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(10)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(10)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>12. You need to join two ropes of different thicknesses securely. Which knot is most appropriate?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Overhand Knot, Square Knot, Sheet Bend, Half Hitch | <span style="color: var(--success-color); font-weight:bold;">Ans: Sheet Bend</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(11)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(11)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>13. Why is a Slip Knot not recommended for securing heavy loads?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It is difficult to tie, It tightens permanently, It can loosen when the standing end is pulled, It only works with synthetic rope | <span style="color: var(--success-color); font-weight:bold;">Ans: It can loosen when the standing end is pulled</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(12)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(12)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>14. The Square Knot is also known as:</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Reef Knot, Hangman's Knot, Bowline, Fisherman's Knot | <span style="color: var(--success-color); font-weight:bold;">Ans: Reef Knot</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(13)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(13)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>15. In a survival scenario, which knot would be best for setting up a temporary shelter using a tarp and tree?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Noose Knot, Figure-of-Eight, Overhand Knot, Slip Knot with adjustable loop | <span style="color: var(--success-color); font-weight:bold;">Ans: Slip Knot with adjustable loop</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(14)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(14)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>16. Design a scenario where a Noose Knot is used ethically in camping.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Securing food bags from animals, First-aid splint tying, Climbing harness backup, Hanging a lantern from a branch | <span style="color: var(--success-color); font-weight:bold;">Ans: Hanging a lantern from a branch</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(15)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(15)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>17. What is the main function of a 'stopper knot'?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: To join two ropes, To prevent rope ends from fraying, To create a loop, To stop a rope from slipping through a hole | <span style="color: var(--success-color); font-weight:bold;">Ans: To stop a rope from slipping through a hole</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(16)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(16)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>18. Which knot becomes tighter under load but can be easily loosened?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Square Knot, Sheet Bend, Noose Knot, Overhand Knot | <span style="color: var(--success-color); font-weight:bold;">Ans: Noose Knot</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(17)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(17)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>19. If you need to quickly tie a knot that can be released with one pull, which do you choose?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Figure-of-Eight, Slip Knot, Square Knot, Half Hitch | <span style="color: var(--success-color); font-weight:bold;">Ans: Slip Knot</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(18)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(18)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>20. The ______ is a bend knot used to join two ropes of different diameters.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Overhand Knot, Square Knot, Sheet Bend, Half Hitch | <span style="color: var(--success-color); font-weight:bold;">Ans: Sheet Bend</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(19)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(19)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>21. Outdoor recreation is defined as an activity done during ______ for personal reasons.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Work time, Subsistence time, Free time, Existence time | <span style="color: var(--success-color); font-weight:bold;">Ans: Free time</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(20)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(20)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>22. Why is free time essential for outdoor recreation according to Clayne R. Jensen?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It is the only time when people are not tired, It is the period after existence and subsistence time, It is mandated by law, It is when weather is best | <span style="color: var(--success-color); font-weight:bold;">Ans: It is the period after existence and subsistence time</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(21)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(21)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>23. Which of the following is NOT a benefit of outdoor recreation?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Spiritual benefits, Economic dependency, Social benefits, Physical health benefits | <span style="color: var(--success-color); font-weight:bold;">Ans: Economic dependency</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(22)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(22)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>24. The Philippines has the ______ longest coastline in the world.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Third, Fifth, Seventh, Tenth | <span style="color: var(--success-color); font-weight:bold;">Ans: Fifth</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(23)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(23)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>25. You want an outdoor activity that combines land and water. Which do you choose?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Parasailing, Canyoneering, Bird-watching, Rock climbing | <span style="color: var(--success-color); font-weight:bold;">Ans: Canyoneering</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(24)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(24)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>26. Why might mountain trekking be classified under Trail Class 3?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It requires scrambling using hands for balance, It is a simple stroll, It needs artificial climbing methods, It is only for experts with ropes | <span style="color: var(--success-color); font-weight:bold;">Ans: It requires scrambling using hands for balance</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(25)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(25)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>27. What does 'Masl' stand for in mountain descriptions?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Meters above sea level, Mountain ascent level, Maximum altitude slope limit, Measured altitude slope | <span style="color: var(--success-color); font-weight:bold;">Ans: Meters above sea level</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(26)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(26)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>28. Based on difficulty ratings, which mountain would be the hardest for a beginner?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Mt. Pulag via Ambangeg (5/9), Mt. Apo via Kidapawan (7/9), Mt. Maculot (2/9), Mt. Batulao (3/9) | <span style="color: var(--success-color); font-weight:bold;">Ans: Mt. Apo via Kidapawan (7/9)</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(27)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(27)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>29. Plan a 3-day trip for a group wanting moderate difficulty and beach access.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Mt. Pulag + Baguio, Mt. Daguldul + Batangas beach, Mt. Kanla-on + Bacolod, Mt. Ugo + Benguet rice terraces | <span style="color: var(--success-color); font-weight:bold;">Ans: Mt. Daguldul + Batangas beach</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(28)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(28)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>30. Which mountain is known as the 'playground of the gods'?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Mt. Apo, Mt. Pulag, Mt. Pinatubo, Mt. Guiting-Guiting | <span style="color: var(--success-color); font-weight:bold;">Ans: Mt. Pulag</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(29)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(29)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>31. Why is Mt. Pinatubo's height now 1,486 meters instead of 1,745 meters?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Erosion, Volcanic eruption destroyed the summit, Measurement error, Landslide | <span style="color: var(--success-color); font-weight:bold;">Ans: Volcanic eruption destroyed the summit</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(30)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(30)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>32. What makes Mt. Kitanglad Range ecologically significant?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It has the tallest peak in Luzon, It contains virgin forests and high biodiversity, It is the most active volcano, It is the easiest to climb | <span style="color: var(--success-color); font-weight:bold;">Ans: It contains virgin forests and high biodiversity</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(31)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(31)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>33. Who said, 'It is not the mountain we conquer, but ourselves'?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Anijolette Dorado, Sir Edmund Hillary, Clayne R. Jensen, CNN Travel | <span style="color: var(--success-color); font-weight:bold;">Ans: Sir Edmund Hillary</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(32)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(32)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>34. If you want to see a 'saw-toothed' mountain ridge, where should you go?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Romblon, Cavite, Zambales, Benguet | <span style="color: var(--success-color); font-weight:bold;">Ans: Romblon</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(33)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(33)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>35. What is the main reason people engage in outdoor recreation?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: To earn money, For personal satisfaction and enjoyment, To avoid work, To follow trends | <span style="color: var(--success-color); font-weight:bold;">Ans: For personal satisfaction and enjoyment</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(34)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(34)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>36. You are leading a group of 8 on a camping trip in a windy, rainy area. Which combination of tents is safest?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Two large Dome tents, One Tunnel tent and one Geodesic tent, Three Ridge tents, Multiple Bivy tents | <span style="color: var(--success-color); font-weight:bold;">Ans: One Tunnel tent and one Geodesic tent</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(35)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(35)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>37. A camper used a Square Knot to join climbing ropes, but it failed. Why?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Square Knots slip under load, Square Knots are only for first aid, Square Knots require ropes of different sizes, Square Knots are only for decorative purposes | <span style="color: var(--success-color); font-weight:bold;">Ans: Square Knots slip under load</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(36)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(36)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>38. Design a knot system for securing a rain fly in strong wind using two trees and a rope.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Two Half Hitches + Sheet Bend, Figure-of-Eight loop + Slip Knot adjustment, Square Knot + Overhand backup, Noose Knot + Slip Knot release | <span style="color: var(--success-color); font-weight:bold;">Ans: Figure-of-Eight loop + Slip Knot adjustment</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(37)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(37)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>39. Why is Mt. Guiting-Guiting considered very hard despite not being the tallest?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Steep 87¬∞ slopes and tricky summits, Lack of trails, Active volcanic activity, Extreme cold | <span style="color: var(--success-color); font-weight:bold;">Ans: Steep 87¬∞ slopes and tricky summits</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(38)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(38)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>40. Which mountain would be best for a beginner who wants a manageable climb with a scenic view?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Mt. Apo, Mt. Pulag, Mt. Pico de Loro, Mt. Kanla-on | <span style="color: var(--success-color); font-weight:bold;">Ans: Mt. Pico de Loro</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(39)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(39)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>41. You need to set up a tent on rocky ground where pegs cannot be hammered. What do you do?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Use rocks to anchor guy lines, Skip pegs entirely, Lay tent flat without raising, Only set up rain fly | <span style="color: var(--success-color); font-weight:bold;">Ans: Use rocks to anchor guy lines</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(40)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(40)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>42. Propose a 2-day outdoor recreation itinerary for someone visiting Siargao who isn't a surfer.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Cloud Nine viewing + island hopping + trekking, Only beach lounging, Mountain biking + caving, Skydiving + parasailing | <span style="color: var(--success-color); font-weight:bold;">Ans: Cloud Nine viewing + island hopping + trekking</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(41)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(41)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>43. Which statement about outdoor recreation is FALSE?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It must be done in natural environments only, It can have economic benefits, It contributes to psycho-emotional health, It is done during free time | <span style="color: var(--success-color); font-weight:bold;">Ans: It must be done in natural environments only</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(42)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(42)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>44. What is the ecological risk of promoting mountaineering in biodiverse areas like Mt. Kitanglad?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Increased trail erosion and wildlife disturbance, Decreased tourism revenue, Reduced need for guides, Improved local infrastructure only | <span style="color: var(--success-color); font-weight:bold;">Ans: Increased trail erosion and wildlife disturbance</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(43)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(43)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>45. Develop a Leave No Trace camping guideline using tent pitching and knot tying principles.</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Use biodegradable pegs, avoid cutting live branches for knots, Leave ropes tied to trees for next campers, Bury tent pegs after use, Use only Square Knots for easy removal | <span style="color: var(--success-color); font-weight:bold;">Ans: Use biodegradable pegs, avoid cutting live branches for knots</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(44)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(44)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>46. Why is the story of Anijolette 'Babeyboo' Dorado significant in outdoor recreation?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Shows age is not a barrier to outdoor engagement, Promotes competitive climbing, Highlights the dangers of hiking with children, Encourages professional mountaineering only | <span style="color: var(--success-color); font-weight:bold;">Ans: Shows age is not a barrier to outdoor engagement</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(45)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(45)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>47. If you are camping near a river and expect heavy rain, which tent type should you prioritize?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Dome tent with good ventilation, Ridge tent with steep roof, Tunnel tent with large vestibule, Geodesic tent with high waterproof rating | <span style="color: var(--success-color); font-weight:bold;">Ans: Ridge tent with steep roof</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(46)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(46)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>48. In knot tying, why is the Figure-of-Eight preferred over the Overhand Knot for climbing?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: It is stronger and easier to untie after loading, It is quicker to tie, It uses less rope, It is more decorative | <span style="color: var(--success-color); font-weight:bold;">Ans: It is stronger and easier to untie after loading</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(47)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(47)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>49. Imagine a scenario where you must secure a food bag from animals using a rope and tree. Which knot combination is safest?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Slip Knot + Half Hitch, Noose Knot + Sheet Bend, Figure-of-Eight loop + carabiner, Square Knot + Overhand backup | <span style="color: var(--success-color); font-weight:bold;">Ans: Figure-of-Eight loop + carabiner</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(48)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(48)">Del</button>
                            </div>
                        </div>
                    
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>50. Which mountain's history includes both wartime significance and natural oasis features?</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: Mt. Mariveles - Tarak Ridge, Mt. Pulag, Mt. Kanla-on, Mt. Pinatubo | <span style="color: var(--success-color); font-weight:bold;">Ans: Mt. Mariveles - Tarak Ridge</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(49)">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(49)">Del</button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>

        <div style="margin-top: 1.5rem; padding: 1rem; background: #f5f5f5; border-radius: 8px; border: 1px solid #ddd;">
            <p style="font-weight: bold; margin-bottom: 0.5rem; font-size: 0.9rem;">Backup &amp; Portability</p>
            <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <button class="badge-btn" style="background: #4caf50; color: white; flex: 1;" onclick="exportQuestionsJSON()">üíæ Export JSON</button>
                <button class="badge-btn" style="background: #2196f3; color: white; flex: 1;" onclick="document.getElementById('importFile').click()">üìÇ Import JSON</button>
                <button class="badge-btn" style="background: #e91e63; color: white; flex: 1; min-width: 150px;" onclick="downloadUpdatedApp()">üöÄ Download App (Save to File)</button>
            </div>
            <input type="file" id="importFile" style="display: none;" accept=".json" onchange="importQuestionsJSON(event)">
        </div>
    </div>

    <!-- Question Form Modal (Simplified Overlay) -->
    <div id="q-form-overlay" class="warning-overlay" style="background: rgba(0, 0, 0, 0.85); display: none;">
        <div class="modal-content" style="max-width: 700px; max-height: 90vh; overflow-y: auto; color: black; text-align: left;">
            <h2 id="q-form-title">Add Question</h2>
            <input type="hidden" id="edit-q-index" value="-1">
            <div class="form-group">
                <label>Question Text</label>
                <input type="text" id="q-text" placeholder="Enter question..." style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div id="choices-container">
                <label>Choices</label>
                <div style="margin-bottom: 10px;"><input type="text" class="q-choice" placeholder="Choice 1" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;"></div>
                <div style="margin-bottom: 10px;"><input type="text" class="q-choice" placeholder="Choice 2" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;"></div>
                <div style="margin-bottom: 10px;"><input type="text" class="q-choice" placeholder="Choice 3" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;"></div>
                <div style="margin-bottom: 10px;"><input type="text" class="q-choice" placeholder="Choice 4" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;"></div>
            </div>
            <div class="form-group">
                <label>Correct Choice Index (0-3)</label>
                <input type="number" id="q-correct" min="0" max="3" value="0" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn" style="background-color: var(--success-color);" onclick="saveQuestion()">Save
                    Question</button>
                <button class="btn" style="background-color: #ccc;" onclick="hideQuestionForm()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Registration Section -->
    <div id="reg-section" class="container" style="display: none;">
        <button onclick="showPortal()" style="background:none; border:none; cursor:pointer; color: var(--primary-color); font-weight: bold; margin-bottom: 1rem;">‚Üê
            Back</button>
        <h1>Student Registration</h1>
        <div class="form-group">
            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" placeholder="Enter your full name" required="">
        </div>
        <div class="form-group">
            <label for="gradeSection">Grade &amp; Section</label>
            <input type="text" id="gradeSection" placeholder="e.g. Grade 12 - A" required="">
        </div>
        <div class="form-group">
            <label for="subjectSelect">Subject</label>
            <select id="subjectSelect" required="" style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 6px; font-size: 1rem;">
                <option value="">Select a subject...</option>
            </select>
        </div>
        <button class="btn" onclick="startExam()">Start Exam</button>
        <p style="font-size: 0.8rem; color: #666; margin-top: 1rem; text-align: center;">
            Note: Clicking Start will enter Fullscreen mode and lock the exam.
        </p>
    </div>

    <!-- Exam Section -->
    <div id="exam-section" class="container" style="display: none;">
        <div class="timer-container">Time Remaining: <span id="timer">30:00</span></div>
        <div id="navigation-ribbon" style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 1.5rem; justify-content: center;">
            <!-- Question numbers go here -->
        </div>
        <div id="question-container">
            <!-- Dynamic Question Content -->
        </div>
        <div style="display: flex; gap: 10px;">
            <button id="prev-btn" class="btn" style="background-color: #757575;" onclick="prevQuestion()">Previous</button>
            <button id="next-btn" class="btn" onclick="nextQuestion()">Next Question</button>
        </div>
    </div>

    <!-- Result Section -->
    <div id="result-section" class="container" style="display: none;">
        <h2>Exam Finished</h2>
        <div id="score-summary" style="text-align: center; font-size: 1.2rem; margin-bottom: 1.5rem;">
            <!-- Score details will go here -->
        </div>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="btn" style="background-color: var(--success-color);" onclick="downloadPDF()">Download PDF
                Report</button>
            <button class="btn" onclick="sendResults()">Send Results to Messenger</button>
        </div>
    </div>

    <!-- Already Submitted Section -->
    <div id="already-submitted-section" class="container" style="text-align: center; display: none;">
        <div class="lock-icon" style="color: var(--error-color);">üö´</div>
        <h2>EXAM ALREADY SUBMITTED</h2>
        <p>You have already completed this examination. Re-taking the quiz is strictly prohibited.</p>
        <div id="previous-score-info" style="margin-top: 1.5rem; padding: 1rem; background: #eee; border-radius: 8px;">
            <!-- Previous score info here -->
        </div>
        <div style="margin-top: 2rem; border-top: 1px dashed #ccc; padding-top: 1.5rem;">
            <p style="font-size: 0.9rem; margin-bottom: 0.5rem; font-weight: bold;">Unlock Retake (Proctor Only)</p>
            <input type="text" id="retakeUnlockCode" placeholder="Enter secret code" style="padding: 0.8rem; border: 2px solid #ddd; border-radius: 6px; width: 100%; max-width: 300px; text-align: center;">
            <button class="btn" style="max-width: 300px; margin: 10px auto; background-color: var(--secondary-color);" onclick="attemptRetakeUnlock()">Verify &amp; Reset</button>
            <p id="retake-error" style="color: var(--error-color); font-size: 0.8rem; display: none;">Invalid secret
                code.</p>
        </div>
        <p style="margin-top: 1.5rem; font-size: 0.9rem; color: #666;">If you believe this is an error, please contact
            your proctor.</p>
    </div>

    <!-- Warning Overlay -->
    <div id="warning-overlay" class="warning-overlay">
        <div class="lock-icon">üîí</div>
        <h2>EXAM LOCKED</h2>
        <p id="lock-reason">Unauthorized action detected (Tab switch or minimize).</p>
        <div style="margin-top: 2rem; width: 100%; max-width: 300px;">
            <label for="unlockCode" style="color: white; margin-bottom: 0.5rem; display: block;">Enter Proctor Unlock
                Code:</label>
            <input type="text" id="unlockCode" placeholder="Enter code" style="color: black; text-align: center;">
            <p id="unlock-error" style="color: #ff8a80; font-size: 0.9rem; margin-top: 0.5rem; display: none;">Invalid
                code. Please try again.</p>
        </div>
        <p style="margin-top: 1rem; font-size: 0.9rem;">Please contact the proctor to unlock your exam.</p>
        <button class="btn" style="margin-top: 2rem; max-width: 300px;" onclick="attemptRelock()">Unlock &amp;
            Resume</button>
    </div>

    <script>
        /**
         * QUARTER EXAMINATION APP
         * Features: Fullscreen Enforcement, Lockdown Mode, Tab-switch detection, Auto-submit.
         */

        // CONFIGURATION & DATA
        const EXAM_DURATION = 30 * 60; // 30 minutes in seconds

        // Initial Subject Database Structure
        const DEFAULT_SUBJECTS = [
  {
    "id": "sub_1768821277913",
    "name": "General Knowledge",
    "status": "enabled",
    "duration": 30,
    "questions": [
      {
        "id": 1,
        "text": "What is the capital of the Philippines?",
        "options": [
          "Manila",
          "Cebu",
          "Davao",
          "Quezon City"
        ],
        "answer": 0
      },
      {
        "id": 2,
        "text": "Which planet is known as the Red Planet?",
        "options": [
          "Earth",
          "Mars",
          "Jupiter",
          "Venus"
        ],
        "answer": 1
      },
      {
        "id": 3,
        "text": "What is 15 + 7?",
        "options": [
          "21",
          "22",
          "23",
          "24"
        ],
        "answer": 1
      },
      {
        "id": 4,
        "text": "Who wrote 'Noli Me Tangere'?",
        "options": [
          "Andres Bonifacio",
          "Jose Rizal",
          "Apolinario Mabini",
          "Emilio Aguinaldo"
        ],
        "answer": 1
      },
      {
        "id": 5,
        "text": "What is the largest ocean on Earth?",
        "options": [
          "Atlantic",
          "Indian",
          "Arctic",
          "Pacific"
        ],
        "answer": 3
      }
    ]
  },
  {
    "id": "sub_1768821306849",
    "name": "Personal Development",
    "status": "enabled",
    "duration": 60,
    "questions": [
      {
        "id": 1,
        "text": "Which stage of development is referred to as the 'foundation age' when basic behaviors are organized?",
        "options": [
          "Early Childhood",
          "Infancy",
          "Late Childhood",
          "Adolescence"
        ],
        "answer": 1
      },
      {
        "id": 2,
        "text": "If a child speaks in 3‚Äì4 word sentences, shows defiant behavior, and imitates others, which developmental stage are they most likely in?",
        "options": [
          "Infancy (1 year old)",
          "Infancy (2 years old)",
          "Early Childhood (4 years old)",
          "Late Childhood (8 years old)"
        ],
        "answer": 1
      },
      {
        "id": 3,
        "text": "During which prenatal stage do vital organs and body systems form?",
        "options": [
          "Germinal stage",
          "Embryonic stage",
          "Fetal stage",
          "Placental stage"
        ],
        "answer": 1
      },
      {
        "id": 4,
        "text": "In Late Childhood (6‚Äì12 years), peer acceptance becomes very important. Why is parental approval still significant at this stage?",
        "options": [
          "Children are completely independent from parents.",
          "Parental validation helps balance peer influence and builds security.",
          "Children reject parental approval entirely.",
          "Parents are the only source of social interaction."
        ],
        "answer": 1
      },
      {
        "id": 5,
        "text": "What is the age range for Early Adulthood?",
        "options": [
          "18‚Äì40 years",
          "40‚Äì65 years",
          "12‚Äì18 years",
          "6‚Äì12 years"
        ],
        "answer": 0
      },
      {
        "id": 6,
        "text": "An adolescent is highly concerned with appearance and frequently challenges authority. What developmental need is driving this behavior?",
        "options": [
          "The need for financial independence",
          "The attempt to establish self-identity",
          "The decline in physical abilities",
          "The focus on career planning"
        ],
        "answer": 1
      },
      {
        "id": 7,
        "text": "Which stage of adolescence is marked by the completion of puberty and increased capacity for abstract thought?",
        "options": [
          "Early adolescence",
          "Middle adolescence",
          "Late adolescence",
          "Emerging adulthood"
        ],
        "answer": 1
      },
      {
        "id": 8,
        "text": "In Middle Age (40 to retirement), individuals adjust to physical changes and new concerns. Which reflects a common emotional challenge during this period?",
        "options": [
          "Learning to walk and talk",
          "Fear of aging and job security",
          "Puberty-related changes",
          "Rapid physical growth"
        ],
        "answer": 1
      },
      {
        "id": 9,
        "text": "Which of the following is considered an internal stressor?",
        "options": [
          "Death of a loved one",
          "Negative self-talk",
          "School demands",
          "Moving to a new school"
        ],
        "answer": 1
      },
      {
        "id": 10,
        "text": "Early Adulthood involves adjusting to new life patterns and roles. Which scenario best illustrates a successful adjustment in this stage?",
        "options": [
          "A teenager focusing on peer acceptance",
          "A middle-aged adult worrying about retirement",
          "A young adult learning to profit from mistakes and take responsibility",
          "A child developing fears of the dark"
        ],
        "answer": 2
      },
      {
        "id": 11,
        "text": "What does personal effectiveness primarily rely on?",
        "options": [
          "External validation",
          "Innate characteristics like talents and skills",
          "Financial resources",
          "Social media presence"
        ],
        "answer": 1
      },
      {
        "id": 12,
        "text": "Older adulthood is the fastest-growing age bracket. Which strategy best addresses the emotional needs of someone in this stage?",
        "options": [
          "Ignoring health concerns",
          "Focusing only on financial planning",
          "Engaging in suitable forms of entertainment and social connection",
          "Avoiding any discussion of aging"
        ],
        "answer": 2
      },
      {
        "id": 13,
        "text": "Which best describes holistic development?",
        "options": [
          "Focusing only on academic success",
          "Balancing mental, physical, social, emotional, and spiritual growth",
          "Prioritizing financial stability above all",
          "Avoiding emotional expression"
        ],
        "answer": 1
      },
      {
        "id": 14,
        "text": "If a child in Early Childhood has a vivid imagination and struggles to distinguish real from imaginary, what should a caregiver do?",
        "options": [
          "Discourage imaginative play entirely",
          "Clearly explain the difference between reality and fantasy without dismissing creativity",
          "Isolate the child from social interaction",
          "Encourage only logical and reality-based activities"
        ],
        "answer": 1
      },
      {
        "id": 15,
        "text": "In which developmental stage do individuals typically begin to value family relationships and show emotional stability?",
        "options": [
          "Early adolescence",
          "Middle adolescence",
          "Late adolescence",
          "Early adulthood"
        ],
        "answer": 2
      },
      {
        "id": 16,
        "text": "Which of the following is NOT a skill that increases personal efficiency?",
        "options": [
          "Determination",
          "Procrastination",
          "Self-confidence",
          "Creativity"
        ],
        "answer": 1
      },
      {
        "id": 17,
        "text": "Which is a common social challenge during adolescence?",
        "options": [
          "Excessive sleep",
          "Youth violence",
          "Overhydration",
          "Lack of hobbies"
        ],
        "answer": 1
      },
      {
        "id": 18,
        "text": "What term refers to the differentiation between right and wrong behavior?",
        "options": [
          "Autonomy",
          "Morality",
          "Identity",
          "Emotional stability"
        ],
        "answer": 1
      },
      {
        "id": 19,
        "text": "What is a common physical symptom of anxiety?",
        "options": [
          "Increased appetite",
          "Decreased heart rate",
          "Sweating and trembling",
          "Improved concentration"
        ],
        "answer": 2
      },
      {
        "id": 20,
        "text": "Which eating disorder is characterized by binge eating followed by purging?",
        "options": [
          "Anorexia Nervosa",
          "Bulimia Nervosa",
          "Bipolar Disorder",
          "Clinical Depression"
        ],
        "answer": 1
      },
      {
        "id": 21,
        "text": "Mood swings, irritability, and social withdrawal may indicate which mental health issue?",
        "options": [
          "Euphoria",
          "Depression",
          "Hyperactivity",
          "Optimism"
        ],
        "answer": 1
      },
      {
        "id": 22,
        "text": "Which is a healthy way to cope with stress?",
        "options": [
          "Avoiding all social interactions",
          "Practicing abdominal breathing",
          "Increasing caffeine intake",
          "Suppressing emotions"
        ],
        "answer": 1
      },
      {
        "id": 23,
        "text": "What is the primary focus of spiritual development during adolescence?",
        "options": [
          "Financial planning",
          "Career selection",
          "Exploring questions about existence and faith",
          "Physical fitness"
        ],
        "answer": 2
      },
      {
        "id": 24,
        "text": "Which stage of human development is called the 'gang and creativity age'?",
        "options": [
          "Infancy",
          "Early childhood",
          "Late childhood",
          "Adolescence"
        ],
        "answer": 2
      },
      {
        "id": 25,
        "text": "What does 'identity' refer to in adolescent development?",
        "options": [
          "Physical appearance",
          "Set of qualities and beliefs that differentiate a person",
          "Academic performance",
          "Family background"
        ],
        "answer": 1
      },
      {
        "id": 26,
        "text": "Which is an example of an emotional symptom of stress?",
        "options": [
          "Improved sleep",
          "Feeling overwhelmed",
          "Increased energy",
          "Clear thinking"
        ],
        "answer": 1
      },
      {
        "id": 27,
        "text": "What is a key characteristic of middle adolescence?",
        "options": [
          "Complete physical maturity",
          "Strong interest in romantic relationships",
          "Lack of peer influence",
          "Disinterest in future planning"
        ],
        "answer": 1
      },
      {
        "id": 28,
        "text": "Which skill helps an individual stay focused on goals without distraction?",
        "options": [
          "Creativity",
          "Persistence",
          "Stress management",
          "Self-confidence"
        ],
        "answer": 1
      },
      {
        "id": 29,
        "text": "What does the 'fight' response to stress typically involve?",
        "options": [
          "Feelings of numbness",
          "Restless legs",
          "Aggressiveness and anger",
          "Social withdrawal"
        ],
        "answer": 2
      },
      {
        "id": 30,
        "text": "Which is NOT a component of personal effectiveness?",
        "options": [
          "Time management",
          "Talent identification",
          "Ignoring feedback",
          "Skill development"
        ],
        "answer": 2
      },
      {
        "id": 31,
        "text": "How is social health related to personal development?",
        "options": [
          "It is only about having many friends.",
          "It involves communication, compromise, and cooperation.",
          "It focuses solely on family relationships.",
          "It ignores emotional connections."
        ],
        "answer": 1
      },
      {
        "id": 32,
        "text": "Which developmental task is associated with late adolescence?",
        "options": [
          "Beginning to walk and talk",
          "Preparing for adult roles",
          "Learning to share toys",
          "Retiring from work"
        ],
        "answer": 1
      },
      {
        "id": 33,
        "text": "What is a common cognitive problem during adolescence?",
        "options": [
          "Improved memory",
          "Inability to concentrate",
          "Enhanced judgment",
          "Increased creativity"
        ],
        "answer": 1
      },
      {
        "id": 34,
        "text": "Which of the following is a positive emotion?",
        "options": [
          "Jealousy",
          "Relief",
          "Annoyance",
          "Fear"
        ],
        "answer": 1
      },
      {
        "id": 35,
        "text": "What is the primary purpose of the abdominal breathing technique?",
        "options": [
          "To increase stress",
          "To improve digestion",
          "To promote relaxation",
          "To enhance physical strength"
        ],
        "answer": 2
      },
      {
        "id": 36,
        "text": "Which statement best describes 'stress as relational'?",
        "options": [
          "Stress is only a physical response.",
          "Stress arises from the interaction between a person and their environment.",
          "Stress is always harmful.",
          "Stress is unrelated to emotions."
        ],
        "answer": 1
      },
      {
        "id": 37,
        "text": "What distinguishes internal stressors from external stressors?",
        "options": [
          "Internal stressors come from outside events; external from thoughts.",
          "Internal stressors originate from personal thoughts; external from outside situations.",
          "Both are caused by genetic factors.",
          "Neither affects emotional well-being."
        ],
        "answer": 1
      },
      {
        "id": 38,
        "text": "Which indicates healthy adolescent development?",
        "options": [
          "Complete dependence on parents",
          "Ability to plan for long-term goals",
          "Avoidance of all risks",
          "Lack of peer interaction"
        ],
        "answer": 1
      },
      {
        "id": 39,
        "text": "What is the major developmental focus during the embryonic stage?",
        "options": [
          "Formation of vital organs",
          "Development of social skills",
          "Learning language",
          "Building career plans"
        ],
        "answer": 0
      },
      {
        "id": 40,
        "text": "Which is a common family-related challenge in middle adolescence?",
        "options": [
          "Lack of interest in peer opinions",
          "Increased dependency on parents",
          "Arguments over rules and independence",
          "Complete agreement with parental views"
        ],
        "answer": 2
      },
      {
        "id": 41,
        "text": "How does creativity contribute to personal effectiveness?",
        "options": [
          "It limits problem-solving options.",
          "It allows for unconventional solutions.",
          "It reduces emotional expression.",
          "It discourages innovation."
        ],
        "answer": 1
      },
      {
        "id": 42,
        "text": "Which is a symptom of depression in men?",
        "options": [
          "Increased social engagement",
          "Reduced sexual desire",
          "Excessive happiness",
          "Lack of anger"
        ],
        "answer": 1
      },
      {
        "id": 43,
        "text": "What is a key element of autonomy in late adolescence?",
        "options": [
          "Total reliance on peers",
          "Financial dependence on parents",
          "Emancipation and vocational planning",
          "Avoidance of all responsibilities"
        ],
        "answer": 2
      },
      {
        "id": 44,
        "text": "How is 'mental health' best defined?",
        "options": [
          "Absence of mental illness",
          "State of well-being where one can cope with life's stresses",
          "Constant happiness",
          "Lack of emotional expression"
        ],
        "answer": 1
      },
      {
        "id": 45,
        "text": "What is a common physical change during middle age?",
        "options": [
          "Improved eyesight",
          "Hair thinning and graying",
          "Increased muscle tone",
          "Enhanced hearing"
        ],
        "answer": 1
      },
      {
        "id": 46,
        "text": "Which is a social challenge related to adolescent reproductive health?",
        "options": [
          "Excessive exercise",
          "Lack of access to appropriate healthcare",
          "Overeating",
          "Too much sleep"
        ],
        "answer": 1
      },
      {
        "id": 47,
        "text": "What is the goal of 'zero navigation' when studying?",
        "options": [
          "To multitask efficiently",
          "To minimize distractions",
          "To increase social interaction",
          "To delay task completion"
        ],
        "answer": 1
      },
      {
        "id": 48,
        "text": "Which is a characteristic of early adolescence?",
        "options": [
          "Strong interest in long-term planning",
          "High level of emotional stability",
          "Curiosity about bodily changes",
          "Complete independence from parents"
        ],
        "answer": 2
      },
      {
        "id": 49,
        "text": "How do peer relationships contribute to adolescent development?",
        "options": [
          "They prevent identity formation.",
          "They encourage dependency on parents.",
          "They foster independence and personal identity.",
          "They eliminate the need for family support."
        ],
        "answer": 2
      },
      {
        "id": 50,
        "text": "Which risk behavior is common in middle adolescence?",
        "options": [
          "Avoiding new experiences",
          "Excessive caution in decision-making",
          "Experimentation with substances",
          "Complete reliance on authority figures"
        ],
        "answer": 2
      }
    ]
  },
  {
    "id": "sub_1768825675494",
    "name": "Practical Research I",
    "status": "enabled",
    "duration": 60,
    "questions": [
      {
        "id": 1,
        "text": "Which of the following correctly defines 'inquiry' in research?",
        "options": [
          "A process of validating existing theories without questioning",
          "A learning process that motivates one to obtain knowledge by asking questions",
          "A method of gathering numerical data only",
          "The final step in writing a research paper"
        ],
        "answer": 1
      },
      {
        "id": 2,
        "text": "What is the main purpose of a 'Narrative Hook' in the Background of the Study?",
        "options": [
          "To present the methodology",
          "To list the research questions",
          "To draw the reader into the study",
          "To state the scope and delimitations"
        ],
        "answer": 2
      },
      {
        "id": 3,
        "text": "Which research type aims to apply findings to societal problems or issues?",
        "options": [
          "Pure Research",
          "Exploratory Research",
          "Applied Research",
          "Descriptive Research"
        ],
        "answer": 2
      },
      {
        "id": 4,
        "text": "What is the correct order of sections in Chapter 1 of a research paper?",
        "options": [
          "Significance, Background, Statement of the Problem, Scope",
          "Background, Statement of the Problem, Significance, Scope",
          "Scope, Background, Significance, Statement of the Problem",
          "Background, Scope, Significance, Statement of the Problem"
        ],
        "answer": 1
      },
      {
        "id": 5,
        "text": "Which of the following is a characteristic of Qualitative Research?",
        "options": [
          "Uses only numerical data",
          "Requires controlled variables",
          "Abounds with words and visuals",
          "Avoids human interpretation"
        ],
        "answer": 2
      },
      {
        "id": 6,
        "text": "What does 'Scope and Delimitation' of a study primarily define?",
        "options": [
          "The theoretical framework",
          "The boundaries and weaknesses of the study",
          "The data analysis procedure",
          "The list of references"
        ],
        "answer": 1
      },
      {
        "id": 7,
        "text": "In research, what is a 'Purpose Statement'?",
        "options": [
          "A broad subject matter",
          "The major intent or objective of the study",
          "A list of variables",
          "The final conclusion"
        ],
        "answer": 1
      },
      {
        "id": 8,
        "text": "Which of the following is an example of a Secondary Data source?",
        "options": [
          "Personal interviews",
          "Survey results",
          "Government publications",
          "Laboratory experiments"
        ],
        "answer": 2
      },
      {
        "id": 9,
        "text": "What is the main goal of Ethnography as a qualitative research type?",
        "options": [
          "To examine historical documents",
          "To study a particular cultural group's lifestyle",
          "To measure numerical relationships",
          "To test a new theory"
        ],
        "answer": 1
      },
      {
        "id": 10,
        "text": "Which term refers to the 'general educational issue or concern addressed in research'?",
        "options": [
          "Research Question",
          "Purpose Statement",
          "Research Problem",
          "Topic"
        ],
        "answer": 2
      },
      {
        "id": 11,
        "text": "What is a key guideline in framing a research title?",
        "options": [
          "It must be more than 20 words",
          "It must explicitly state the research design",
          "It must list key variables",
          "It must include the researcher's name"
        ],
        "answer": 2
      },
      {
        "id": 12,
        "text": "Which approach combines scientific and naturalistic methods?",
        "options": [
          "Pure Approach",
          "Triangulation Approach",
          "Positive Approach",
          "Deductive Approach"
        ],
        "answer": 1
      },
      {
        "id": 13,
        "text": "Which section of the research paper states who will benefit from the study?",
        "options": [
          "Background of the Study",
          "Statement of the Problem",
          "Significance of the Study",
          "Scope and Delimitation"
        ],
        "answer": 2
      },
      {
        "id": 14,
        "text": "What type of research 'defines or gives a portrayal of a person, thing, or event'?",
        "options": [
          "Correlational",
          "Explanatory",
          "Descriptive",
          "Action"
        ],
        "answer": 2
      },
      {
        "id": 15,
        "text": "Which of the following is NOT a good source of researchable problems?",
        "options": [
          "Personal fantasies without evidence",
          "Previous research recommendations",
          "National trends",
          "Real-life student issues"
        ],
        "answer": 0
      },
      {
        "id": 16,
        "text": "A study aims to determine the relationship between sleep duration and academic performance of SHS students. Which research type is most appropriate?",
        "options": [
          "Descriptive",
          "Correlational",
          "Historical",
          "Phenomenology"
        ],
        "answer": 1
      },
      {
        "id": 17,
        "text": "Which research title is most appropriately framed according to the standards discussed?",
        "options": [
          "'A Study on Social Media'",
          "'The Effect of Facebook Usage on Attention Span of Grade 11 Students'",
          "'How Social Media is Bad for Students: A Qualitative Inquiry'",
          "'An Investigation into the Relationship Between Two Variables'"
        ],
        "answer": 1
      },
      {
        "id": 18,
        "text": "In a study on 'Math Anxiety and Problem-Solving Skills,' which part of Chapter 1 would explain why past studies show conflicting results?",
        "options": [
          "Significance of the Study",
          "Background of the Study",
          "Statement of the Problem",
          "Scope and Delimitation"
        ],
        "answer": 1
      },
      {
        "id": 19,
        "text": "A researcher writes: 'This study aims to explore the lived experiences of teenage mothers.' Which qualitative research type is this?",
        "options": [
          "Case Study",
          "Ethnography",
          "Phenomenology",
          "Grounded Theory"
        ],
        "answer": 2
      },
      {
        "id": 20,
        "text": "Which of the following is the BEST example of a Research Question derived from the Purpose Statement: 'To identify factors affecting low grades in Mathematics'?",
        "options": [
          "What is Mathematics?",
          "How many students fail Math?",
          "What are the factors affecting low grades in Mathematics among SHS students?",
          "Why do students dislike Math?"
        ],
        "answer": 2
      },
      {
        "id": 21,
        "text": "If a study uses both surveys and interviews to examine bullying, which research approach is being used?",
        "options": [
          "Scientific Approach",
          "Naturalistic Approach",
          "Triangulation Approach",
          "Pure Approach"
        ],
        "answer": 2
      },
      {
        "id": 22,
        "text": "Which of the following topics is MOST appropriate for a qualitative case study?",
        "options": [
          "The GDP of the Philippines from 2000-2020",
          "Coping Mechanisms of a Student with Dyslexia",
          "The Effect of Light on Plant Growth",
          "A Nationwide Survey on Voting Preferences"
        ],
        "answer": 1
      },
      {
        "id": 23,
        "text": "What is the main weakness of a study that uses only self-reported questionnaires for data on social media addiction?",
        "options": [
          "Too broad scope",
          "Possible subjectivity and reliability issues",
          "Lack of literature support",
          "Too few respondents"
        ],
        "answer": 1
      },
      {
        "id": 24,
        "text": "Which Statement of the Problem is correctly phrased?",
        "options": [
          "'This study aims to prove that social media is harmful.'",
          "'This study generally aims to determine the relationship between study habits and grades.'",
          "'This study will answer everything about learning.'",
          "'This study seeks to find out if students are happy.'"
        ],
        "answer": 1
      },
      {
        "id": 25,
        "text": "Given the topic 'Online Learning Fatigue,' which Background of the Study opening is the strongest Narrative Hook?",
        "options": [
          "'Online learning is a method of education.'",
          "'According to DepEd, 80% of students reported mental exhaustion after online classes.'",
          "'This study is about online learning.'",
          "'Many students use computers.'"
        ],
        "answer": 1
      },
      {
        "id": 26,
        "text": "A study on 'Leadership Styles in Student Organizations' uses interviews, observations, and document review. Which qualitative research type does this resemble?",
        "options": [
          "Historical Analysis",
          "Content Analysis",
          "Case Study",
          "Grounded Theory"
        ],
        "answer": 2
      },
      {
        "id": 27,
        "text": "Which of the following is a delimitation?",
        "options": [
          "The study is conducted at DLSAU.",
          "The study uses random sampling.",
          "The study does not include junior high school students.",
          "The study aims to improve teaching strategies."
        ],
        "answer": 2
      },
      {
        "id": 28,
        "text": "What is the primary difference between 'Topic' and 'Research Problem'?",
        "options": [
          "Topic is specific, Research Problem is broad",
          "Topic is broad, Research Problem narrows the topic into an issue",
          "Topic is a question, Research Problem is an answer",
          "There is no difference"
        ],
        "answer": 1
      },
      {
        "id": 29,
        "text": "Which of the following Significance of the Study statements is MOST specific?",
        "options": [
          "'This study will help everyone.'",
          "'Teachers may use the findings to design attention-focused activities.'",
          "'The study is significant.'",
          "'It will contribute to knowledge.'"
        ],
        "answer": 1
      },
      {
        "id": 30,
        "text": "If a researcher wants to develop a new theory about student motivation during the pandemic, which qualitative type is best?",
        "options": [
          "Ethnography",
          "Grounded Theory",
          "Phenomenology",
          "Historical Analysis"
        ],
        "answer": 1
      },
      {
        "id": 31,
        "text": "Why is 'Triangulation Approach' considered advantageous?",
        "options": [
          "It uses only one data source",
          "It allows viewing the research from multiple perspectives",
          "It is the easiest approach",
          "It avoids human subjectivity"
        ],
        "answer": 1
      },
      {
        "id": 32,
        "text": "Which of the following is a researchable topic?",
        "options": [
          "The beauty of sunsets",
          "The effectiveness of a new teaching method on student engagement",
          "Why aliens exist",
          "My personal opinion about movies"
        ],
        "answer": 1
      },
      {
        "id": 33,
        "text": "In Grounded Theory, when does the theory emerge?",
        "options": [
          "Before data collection",
          "During data collection and analysis",
          "After writing the conclusion",
          "It is borrowed from past studies"
        ],
        "answer": 1
      },
      {
        "id": 34,
        "text": "Which is a limitation in a qualitative study?",
        "options": [
          "The sample size is small",
          "The topic is timely",
          "The respondents are cooperative",
          "The data is plentiful"
        ],
        "answer": 0
      },
      {
        "id": 35,
        "text": "Based on the Purpose Statement 'To examine the impact of parental involvement on academic performance,' which research question is correctly formulated?",
        "options": [
          "What is academic performance?",
          "How does parental involvement affect the academic performance of Grade 12 students?",
          "Are parents important?",
          "How many parents are involved?"
        ],
        "answer": 1
      },
      {
        "id": 36,
        "text": "What is the main advantage of qualitative research in social settings?",
        "options": [
          "It provides statistical generalizability",
          "It promotes deep understanding of human behavior in natural contexts",
          "It is quick to conduct",
          "It avoids subjectivity completely"
        ],
        "answer": 1
      },
      {
        "id": 37,
        "text": "Which section of the paper would address 'Why is there a need to study this problem now?'",
        "options": [
          "Scope",
          "Background",
          "Significance",
          "Title"
        ],
        "answer": 1
      },
      {
        "id": 38,
        "text": "A study that examines language use in political speeches is an example of:",
        "options": [
          "Historical Analysis",
          "Discourse Analysis",
          "Case Study",
          "Ethnography"
        ],
        "answer": 1
      },
      {
        "id": 39,
        "text": "Which of the following is a good example of a 'clear need for research' narrative hook?",
        "options": [
          "'Education is important.'",
          "'Many students use Facebook.'",
          "'School dropout rates have increased by 20% in the last five years.'",
          "'This study is interesting.'"
        ],
        "answer": 2
      },
      {
        "id": 40,
        "text": "From the Research Problem 'Low interest in Science among SHS students,' which is the best research title?",
        "options": [
          "'Science Education'",
          "'Factors Affecting Low Interest in Science Among Senior High School Students'",
          "'A Research Study'",
          "'Why Students Hate Science'"
        ],
        "answer": 1
      },
      {
        "id": 41,
        "text": "Which type of data is collected through direct observation or interaction?",
        "options": [
          "Secondary data",
          "Primary data",
          "Historical data",
          "Published data"
        ],
        "answer": 1
      },
      {
        "id": 42,
        "text": "If a study's background cites conflicting findings from previous studies, what is it establishing?",
        "options": [
          "Scope",
          "Research Gap",
          "Methodology",
          "Data analysis"
        ],
        "answer": 1
      },
      {
        "id": 43,
        "text": "In John Dewey's theory, what is essential for inquiry?",
        "options": [
          "Isolated thinking",
          "Connected experiences",
          "Memorization",
          "Standardized testing"
        ],
        "answer": 1
      },
      {
        "id": 44,
        "text": "Which of the following topics is TOO BROAD for a student research?",
        "options": [
          "'The History of the World'",
          "'Reading Habits of Grade 11 STEM Students at DLSAU'",
          "'Social Media Use and Attention Span in One Class'",
          "'Coping Strategies of Public School Teachers in Manila'"
        ],
        "answer": 0
      },
      {
        "id": 45,
        "text": "For a study on 'Bullying in SHS,' which is the best example of a specific beneficiary in the Significance section?",
        "options": [
          "'All people'",
          "'School counselors may use findings to design anti-bullying programs'",
          "'It will be significant'",
          "'Future researchers'"
        ],
        "answer": 1
      },
      {
        "id": 46,
        "text": "What is the main difference between Pure and Applied Research?",
        "options": [
          "Pure Research is practical, Applied is theoretical",
          "Pure Research increases knowledge, Applied solves societal problems",
          "Pure Research uses numbers, Applied uses words",
          "There is no difference"
        ],
        "answer": 1
      },
      {
        "id": 47,
        "text": "Which of the following is NOT a characteristic of research?",
        "options": [
          "Accuracy",
          "Bias",
          "Objectiveness",
          "Systematic process"
        ],
        "answer": 1
      },
      {
        "id": 48,
        "text": "Why is 'Availability of Information' important in choosing a research topic?",
        "options": [
          "It makes the research easier to complete",
          "It ensures there are sources to support the study",
          "It guarantees publication",
          "It avoids primary data collection"
        ],
        "answer": 1
      },
      {
        "id": 49,
        "text": "Which of the following is a strength of qualitative research?",
        "options": [
          "It is highly objective",
          "It allows statistical generalization",
          "It promotes deep contextual understanding",
          "It is quick to analyze"
        ],
        "answer": 2
      },
      {
        "id": 50,
        "text": "Given the Research Question 'How do SHS students perceive online learning?' which qualitative research type is most suitable?",
        "options": [
          "Historical Analysis",
          "Phenomenology",
          "Content Analysis",
          "Correlational Research"
        ],
        "answer": 1
      }
    ]
  },
  {
    "id": "sub_1768829089450",
    "name": "H.O.P.E. 4",
    "status": "disabled",
    "duration": 60,
    "questions": [
      {
        "id": 1,
        "text": "What is the primary purpose of a tent?",
        "options": [
          "To store food away from animals",
          "To provide portable shelter during outdoor activities",
          "To mark camping territory",
          "To serve as a cooking area"
        ],
        "answer": 1
      },
      {
        "id": 2,
        "text": "Which tent type would be most suitable for a solo hiker concerned about weight and stealth camping?",
        "options": [
          "Ridge Tent",
          "Dome Tent",
          "Bivy Tent",
          "Tunnel Tent"
        ],
        "answer": 2
      },
      {
        "id": 3,
        "text": "A family of five plans a car camping trip in rainy weather. Which tent should they avoid?",
        "options": [
          "Geodesic Tent",
          "Tunnel Tent",
          "Dome Tent (large size)",
          "Ridge Tent"
        ],
        "answer": 1
      },
      {
        "id": 4,
        "text": "What is a common disadvantage of Ridge/A-Frame Tents?",
        "options": [
          "Too spacious",
          "Poor rain resistance",
          "Lack of headroom",
          "Difficult to pack"
        ],
        "answer": 2
      },
      {
        "id": 5,
        "text": "If you are camping in an area with strong winds, which tent design would provide the best stability due to its pole structure?",
        "options": [
          "Dome Tent",
          "Geodesic Tent",
          "Tunnel Tent",
          "Bivy Tent"
        ],
        "answer": 1
      },
      {
        "id": 6,
        "text": "Why are Dome Tents considered unstable in larger sizes?",
        "options": [
          "They use too many poles",
          "Their curved structure spreads tension unevenly",
          "They lack guy lines",
          "They are made of heavy material"
        ],
        "answer": 1
      },
      {
        "id": 7,
        "text": "What is the correct first step in pitching a tent?",
        "options": [
          "Hammer in tent pegs",
          "Lay down an earth pad",
          "Unpack tent supplies",
          "Insert poles through the frame"
        ],
        "answer": 2
      },
      {
        "id": 8,
        "text": "You have to camp on soft, sandy ground. Which step in tent pitching should be modified?",
        "options": [
          "Use longer tent pegs or anchors",
          "Skip the rain fly",
          "Insert poles after raising tent",
          "Omit earth pad"
        ],
        "answer": 0
      },
      {
        "id": 9,
        "text": "Which feature is NOT typically desirable in a Bivy Tent?",
        "options": [
          "Lightweight",
          "Large porch area",
          "Built-in bug net",
          "Good ventilation"
        ],
        "answer": 1
      },
      {
        "id": 10,
        "text": "Which tent type is described as 'essentially a dome tent but with more poles'?",
        "options": [
          "Tunnel Tent",
          "Geodesic Tent",
          "Ridge Tent",
          "Bivy Tent"
        ],
        "answer": 1
      },
      {
        "id": 11,
        "text": "Which knot is known as a stopper knot and is used in sailing and climbing?",
        "options": [
          "Sheet Bend",
          "Figure-of-Eight Knot",
          "Square Knot",
          "Slip Knot"
        ],
        "answer": 1
      },
      {
        "id": 12,
        "text": "You need to join two ropes of different thicknesses securely. Which knot is most appropriate?",
        "options": [
          "Overhand Knot",
          "Square Knot",
          "Sheet Bend",
          "Half Hitch"
        ],
        "answer": 2
      },
      {
        "id": 13,
        "text": "Why is a Slip Knot not recommended for securing heavy loads?",
        "options": [
          "It is difficult to tie",
          "It tightens permanently",
          "It can loosen when the standing end is pulled",
          "It only works with synthetic rope"
        ],
        "answer": 2
      },
      {
        "id": 14,
        "text": "The Square Knot is also known as:",
        "options": [
          "Reef Knot",
          "Hangman's Knot",
          "Bowline",
          "Fisherman's Knot"
        ],
        "answer": 0
      },
      {
        "id": 15,
        "text": "In a survival scenario, which knot would be best for setting up a temporary shelter using a tarp and tree?",
        "options": [
          "Noose Knot",
          "Figure-of-Eight",
          "Overhand Knot",
          "Slip Knot with adjustable loop"
        ],
        "answer": 3
      },
      {
        "id": 16,
        "text": "Design a scenario where a Noose Knot is used ethically in camping.",
        "options": [
          "Securing food bags from animals",
          "First-aid splint tying",
          "Climbing harness backup",
          "Hanging a lantern from a branch"
        ],
        "answer": 3
      },
      {
        "id": 17,
        "text": "What is the main function of a 'stopper knot'?",
        "options": [
          "To join two ropes",
          "To prevent rope ends from fraying",
          "To create a loop",
          "To stop a rope from slipping through a hole"
        ],
        "answer": 3
      },
      {
        "id": 18,
        "text": "Which knot becomes tighter under load but can be easily loosened?",
        "options": [
          "Square Knot",
          "Sheet Bend",
          "Noose Knot",
          "Overhand Knot"
        ],
        "answer": 2
      },
      {
        "id": 19,
        "text": "If you need to quickly tie a knot that can be released with one pull, which do you choose?",
        "options": [
          "Figure-of-Eight",
          "Slip Knot",
          "Square Knot",
          "Half Hitch"
        ],
        "answer": 1
      },
      {
        "id": 20,
        "text": "The ______ is a bend knot used to join two ropes of different diameters.",
        "options": [
          "Overhand Knot",
          "Square Knot",
          "Sheet Bend",
          "Half Hitch"
        ],
        "answer": 2
      },
      {
        "id": 21,
        "text": "Outdoor recreation is defined as an activity done during ______ for personal reasons.",
        "options": [
          "Work time",
          "Subsistence time",
          "Free time",
          "Existence time"
        ],
        "answer": 2
      },
      {
        "id": 22,
        "text": "Why is free time essential for outdoor recreation according to Clayne R. Jensen?",
        "options": [
          "It is the only time when people are not tired",
          "It is the period after existence and subsistence time",
          "It is mandated by law",
          "It is when weather is best"
        ],
        "answer": 1
      },
      {
        "id": 23,
        "text": "Which of the following is NOT a benefit of outdoor recreation?",
        "options": [
          "Spiritual benefits",
          "Economic dependency",
          "Social benefits",
          "Physical health benefits"
        ],
        "answer": 1
      },
      {
        "id": 24,
        "text": "The Philippines has the ______ longest coastline in the world.",
        "options": [
          "Third",
          "Fifth",
          "Seventh",
          "Tenth"
        ],
        "answer": 1
      },
      {
        "id": 25,
        "text": "You want an outdoor activity that combines land and water. Which do you choose?",
        "options": [
          "Parasailing",
          "Canyoneering",
          "Bird-watching",
          "Rock climbing"
        ],
        "answer": 1
      },
      {
        "id": 26,
        "text": "Why might mountain trekking be classified under Trail Class 3?",
        "options": [
          "It requires scrambling using hands for balance",
          "It is a simple stroll",
          "It needs artificial climbing methods",
          "It is only for experts with ropes"
        ],
        "answer": 0
      },
      {
        "id": 27,
        "text": "What does 'Masl' stand for in mountain descriptions?",
        "options": [
          "Meters above sea level",
          "Mountain ascent level",
          "Maximum altitude slope limit",
          "Measured altitude slope"
        ],
        "answer": 0
      },
      {
        "id": 28,
        "text": "Based on difficulty ratings, which mountain would be the hardest for a beginner?",
        "options": [
          "Mt. Pulag via Ambangeg (5/9)",
          "Mt. Apo via Kidapawan (7/9)",
          "Mt. Maculot (2/9)",
          "Mt. Batulao (3/9)"
        ],
        "answer": 1
      },
      {
        "id": 29,
        "text": "Plan a 3-day trip for a group wanting moderate difficulty and beach access.",
        "options": [
          "Mt. Pulag + Baguio",
          "Mt. Daguldul + Batangas beach",
          "Mt. Kanla-on + Bacolod",
          "Mt. Ugo + Benguet rice terraces"
        ],
        "answer": 1
      },
      {
        "id": 30,
        "text": "Which mountain is known as the 'playground of the gods'?",
        "options": [
          "Mt. Apo",
          "Mt. Pulag",
          "Mt. Pinatubo",
          "Mt. Guiting-Guiting"
        ],
        "answer": 1
      },
      {
        "id": 31,
        "text": "Why is Mt. Pinatubo's height now 1,486 meters instead of 1,745 meters?",
        "options": [
          "Erosion",
          "Volcanic eruption destroyed the summit",
          "Measurement error",
          "Landslide"
        ],
        "answer": 1
      },
      {
        "id": 32,
        "text": "What makes Mt. Kitanglad Range ecologically significant?",
        "options": [
          "It has the tallest peak in Luzon",
          "It contains virgin forests and high biodiversity",
          "It is the most active volcano",
          "It is the easiest to climb"
        ],
        "answer": 1
      },
      {
        "id": 33,
        "text": "Who said, 'It is not the mountain we conquer, but ourselves'?",
        "options": [
          "Anijolette Dorado",
          "Sir Edmund Hillary",
          "Clayne R. Jensen",
          "CNN Travel"
        ],
        "answer": 1
      },
      {
        "id": 34,
        "text": "If you want to see a 'saw-toothed' mountain ridge, where should you go?",
        "options": [
          "Romblon",
          "Cavite",
          "Zambales",
          "Benguet"
        ],
        "answer": 0
      },
      {
        "id": 35,
        "text": "What is the main reason people engage in outdoor recreation?",
        "options": [
          "To earn money",
          "For personal satisfaction and enjoyment",
          "To avoid work",
          "To follow trends"
        ],
        "answer": 1
      },
      {
        "id": 36,
        "text": "You are leading a group of 8 on a camping trip in a windy, rainy area. Which combination of tents is safest?",
        "options": [
          "Two large Dome tents",
          "One Tunnel tent and one Geodesic tent",
          "Three Ridge tents",
          "Multiple Bivy tents"
        ],
        "answer": 1
      },
      {
        "id": 37,
        "text": "A camper used a Square Knot to join climbing ropes, but it failed. Why?",
        "options": [
          "Square Knots slip under load",
          "Square Knots are only for first aid",
          "Square Knots require ropes of different sizes",
          "Square Knots are only for decorative purposes"
        ],
        "answer": 0
      },
      {
        "id": 38,
        "text": "Design a knot system for securing a rain fly in strong wind using two trees and a rope.",
        "options": [
          "Two Half Hitches + Sheet Bend",
          "Figure-of-Eight loop + Slip Knot adjustment",
          "Square Knot + Overhand backup",
          "Noose Knot + Slip Knot release"
        ],
        "answer": 1
      },
      {
        "id": 39,
        "text": "Why is Mt. Guiting-Guiting considered very hard despite not being the tallest?",
        "options": [
          "Steep 87¬∞ slopes and tricky summits",
          "Lack of trails",
          "Active volcanic activity",
          "Extreme cold"
        ],
        "answer": 0
      },
      {
        "id": 40,
        "text": "Which mountain would be best for a beginner who wants a manageable climb with a scenic view?",
        "options": [
          "Mt. Apo",
          "Mt. Pulag",
          "Mt. Pico de Loro",
          "Mt. Kanla-on"
        ],
        "answer": 2
      },
      {
        "id": 41,
        "text": "You need to set up a tent on rocky ground where pegs cannot be hammered. What do you do?",
        "options": [
          "Use rocks to anchor guy lines",
          "Skip pegs entirely",
          "Lay tent flat without raising",
          "Only set up rain fly"
        ],
        "answer": 0
      },
      {
        "id": 42,
        "text": "Propose a 2-day outdoor recreation itinerary for someone visiting Siargao who isn't a surfer.",
        "options": [
          "Cloud Nine viewing + island hopping + trekking",
          "Only beach lounging",
          "Mountain biking + caving",
          "Skydiving + parasailing"
        ],
        "answer": 0
      },
      {
        "id": 43,
        "text": "Which statement about outdoor recreation is FALSE?",
        "options": [
          "It must be done in natural environments only",
          "It can have economic benefits",
          "It contributes to psycho-emotional health",
          "It is done during free time"
        ],
        "answer": 0
      },
      {
        "id": 44,
        "text": "What is the ecological risk of promoting mountaineering in biodiverse areas like Mt. Kitanglad?",
        "options": [
          "Increased trail erosion and wildlife disturbance",
          "Decreased tourism revenue",
          "Reduced need for guides",
          "Improved local infrastructure only"
        ],
        "answer": 0
      },
      {
        "id": 45,
        "text": "Develop a Leave No Trace camping guideline using tent pitching and knot tying principles.",
        "options": [
          "Use biodegradable pegs, avoid cutting live branches for knots",
          "Leave ropes tied to trees for next campers",
          "Bury tent pegs after use",
          "Use only Square Knots for easy removal"
        ],
        "answer": 0
      },
      {
        "id": 46,
        "text": "Why is the story of Anijolette 'Babeyboo' Dorado significant in outdoor recreation?",
        "options": [
          "Shows age is not a barrier to outdoor engagement",
          "Promotes competitive climbing",
          "Highlights the dangers of hiking with children",
          "Encourages professional mountaineering only"
        ],
        "answer": 0
      },
      {
        "id": 47,
        "text": "If you are camping near a river and expect heavy rain, which tent type should you prioritize?",
        "options": [
          "Dome tent with good ventilation",
          "Ridge tent with steep roof",
          "Tunnel tent with large vestibule",
          "Geodesic tent with high waterproof rating"
        ],
        "answer": 1
      },
      {
        "id": 48,
        "text": "In knot tying, why is the Figure-of-Eight preferred over the Overhand Knot for climbing?",
        "options": [
          "It is stronger and easier to untie after loading",
          "It is quicker to tie",
          "It uses less rope",
          "It is more decorative"
        ],
        "answer": 0
      },
      {
        "id": 49,
        "text": "Imagine a scenario where you must secure a food bag from animals using a rope and tree. Which knot combination is safest?",
        "options": [
          "Slip Knot + Half Hitch",
          "Noose Knot + Sheet Bend",
          "Figure-of-Eight loop + carabiner",
          "Square Knot + Overhand backup"
        ],
        "answer": 2
      },
      {
        "id": 50,
        "text": "Which mountain's history includes both wartime significance and natural oasis features?",
        "options": [
          "Mt. Mariveles - Tarak Ridge",
          "Mt. Pulag",
          "Mt. Kanla-on",
          "Mt. Pinatubo"
        ],
        "answer": 0
      }
    ]
  }
];

        let SUBJECTS_DB = [];
        let ACTIVE_SUBJECT_ID = null;
        let QUESTIONS = []; // To hold active questions during exam

        // Load subjects from local storage or use defaults
        function initDB() {
            const stored = localStorage.getItem('exam_subjects_db');
            if (stored) {
                SUBJECTS_DB = JSON.parse(stored);
                // Migration: Ensure all subjects have a duration field
                let migrated = false;
                SUBJECTS_DB.forEach(s => {
                    if (s.duration === undefined) {
                        s.duration = 30;
                        migrated = true;
                    }
                });
                if (migrated) saveDB();
            } else {
                SUBJECTS_DB = JSON.parse(JSON.stringify(DEFAULT_SUBJECTS));
                saveDB();
            }
        }

        function saveDB() {
            localStorage.setItem('exam_subjects_db', JSON.stringify(SUBJECTS_DB));
        }

        initDB();
        // --- SHUFFLE LOGIC ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function shuffleQuestionsAndChoices() {
            // Shuffle the order of questions
            shuffleArray(QUESTIONS);

            // Shuffle choices within each question and update correct answer index
            QUESTIONS.forEach(q => {
                const correctAnswerText = q.options[q.answer];
                shuffleArray(q.options);
                q.answer = q.options.indexOf(correctAnswerText);
            });
        }

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let timerInterval;
        let timeRemaining = EXAM_DURATION;
        let studentInfo = { name: "", grade: "", subject: "" };
        let isExamActive = false;

        // --- SIREN AUDIO LOGIC ---
        let audioCtx = null;
        let sirenOsc = null;
        let sirenTimer = null;
        let speechLoop = null;
        let vibrateInterval = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        function startSiren() {
            if (!audioCtx) initAudio();
            if (sirenTimer) return;

            sirenOsc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            sirenOsc.type = "sine";
            sirenOsc.frequency.value = 700;
            gainNode.gain.value = 1.0; // Maximize INTERNAL app volume

            sirenOsc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            sirenOsc.start();

            let high = false;
            sirenTimer = setInterval(() => {
                if (sirenOsc) {
                    sirenOsc.frequency.setValueAtTime(
                        high ? 700 : 1200,
                        audioCtx.currentTime
                    );
                    high = !high;
                }
            }, 400);

            // Voice Warning + Persistent Vibration
            const speakWarning = () => {
                const msg = new SpeechSynthesisUtterance("Warning. This learner is trying to exit the exam.");
                msg.rate = 0.9;
                msg.pitch = 1;
                msg.volume = 1;
                speechSynthesis.speak(msg);

                // Intense repeating vibration pattern
                if ("vibrate" in navigator) {
                    navigator.vibrate([500, 200, 500, 200, 500, 200, 800]);
                }
            };
            speakWarning();
            speechLoop = setInterval(speakWarning, 4000);
        }

        function stopSiren() {
            if (sirenTimer) clearInterval(sirenTimer);
            if (speechLoop) clearInterval(speechLoop);
            if (sirenOsc) {
                try { sirenOsc.stop(); } catch (e) { }
                sirenOsc = null;
            }
            speechSynthesis.cancel();
            if ("vibrate" in navigator) navigator.vibrate(0); // Stop any active vibration
            sirenTimer = null;
            speechLoop = null;
        }

        // --- PORTAL NAVIGATION ---
        function showPortal() {
            // Reset visibility
            document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
            document.getElementById('portal-section').style.display = 'block';
            isExamActive = false;
        }

        function showStudentLogin() {
            const submissionData = localStorage.getItem('exam_submission');
            if (submissionData) {
                const data = JSON.parse(submissionData);
                showAlreadySubmitted(data);
            } else {
                // Populate subject dropdown
                const select = document.getElementById('subjectSelect');
                select.innerHTML = '<option value="">Select a subject...</option>';

                const activeSubjects = SUBJECTS_DB.filter(s => s.status === 'enabled');
                if (activeSubjects.length === 0) {
                    alert("No active exams available at the moment. Please check back later.");
                    return;
                }

                activeSubjects.forEach(s => {
                    const opt = document.createElement('option');
                    opt.value = s.id;
                    opt.innerText = s.name;
                    select.appendChild(opt);
                });

                document.getElementById('portal-section').style.display = 'none';
                document.getElementById('reg-section').style.display = 'block';
            }
        }

        function showTeacherLogin() {
            document.getElementById('portal-section').style.display = 'none';
            document.getElementById('teacher-login-section').style.display = 'block';
        }

        function verifyTeacher() {
            const code = document.getElementById('teacherPasscode').value;
            const UNLOCK_CODE = "qwe123";
            if (code === UNLOCK_CODE) {
                document.getElementById('teacher-login-section').style.display = 'none';
                document.getElementById('teacher-dashboard-section').style.display = 'block';
                document.getElementById('teacherPasscode').value = "";
                document.getElementById('teacher-auth-error').style.display = 'none';
                renderSubjectList();
            } else {
                document.getElementById('teacher-auth-error').style.display = 'block';
            }
        }

        // --- SUBJECT MANAGEMENT LOGIC ---
        function renderSubjectList() {
            const container = document.getElementById('subject-list');
            if (SUBJECTS_DB.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#999; padding: 1rem;">No subjects.</p>';
                return;
            }

            container.innerHTML = SUBJECTS_DB.map(s => {
                const isActive = ACTIVE_SUBJECT_ID === s.id;
                const isEnabled = s.status === 'enabled';
                const statusColor = isEnabled ? 'var(--success-color)' : 'var(--error-color)';
                const statusLabel = isEnabled ? 'Active' : 'Hidden';

                return `
                    <div class="subject-item" style="padding: 1rem; border: 1px solid ${isActive ? 'var(--primary-color)' : '#eee'}; 
                        background: ${isActive ? '#f0f4ff' : 'white'}; border-radius: 8px; margin-bottom: 10px; cursor: pointer;
                        box-shadow: ${isActive ? '0 4px 12px rgba(26, 35, 126, 0.1)' : 'none'}; transition: all 0.2s;"
                        onclick="selectSubject('${s.id}')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <strong style="font-size: 0.95rem; display: block; margin-bottom: 2px;">${escapeHTML(s.name)}</strong>
                                <span style="font-size: 0.75rem; color: ${statusColor}; font-weight: 600;">${statusLabel}</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <label class="switch" onclick="event.stopPropagation();">
                                    <input type="checkbox" ${isEnabled ? 'checked' : ''} onchange="toggleSubjectStatus('${s.id}')">
                                    <span class="slider"></span>
                                </label>
                                <button class="badge-btn del-btn" style="padding: 4px 8px; font-size: 0.7rem;" 
                                    onclick="event.stopPropagation(); deleteSubject('${s.id}')">Delete</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function promptAddSubject() {
            const name = prompt("Enter Subject Name:");
            if (name && name.trim()) {
                const newSub = {
                    id: 'sub_' + Date.now(),
                    name: name.trim(),
                    status: 'enabled',
                    duration: 30,
                    questions: []
                };
                SUBJECTS_DB.push(newSub);
                saveDB();
                renderSubjectList();
            }
        }

        function deleteSubject(id) {
            if (confirm("Delete this subject and all its questions?")) {
                SUBJECTS_DB = SUBJECTS_DB.filter(s => s.id !== id);
                if (ACTIVE_SUBJECT_ID === id) {
                    ACTIVE_SUBJECT_ID = null;
                    document.getElementById('current-subject-title').innerText = "Select a subject";
                    document.getElementById('add-q-btn').style.display = 'none';
                }
                saveDB();
                renderSubjectList();
                renderQuestionList();
            }
        }

        function toggleSubjectStatus(id) {
            const sub = SUBJECTS_DB.find(s => s.id === id);
            if (sub) {
                sub.status = sub.status === 'enabled' ? 'disabled' : 'enabled';
                saveDB();
                renderSubjectList();
            }
        }

        function selectSubject(id) {
            ACTIVE_SUBJECT_ID = id;
            const sub = SUBJECTS_DB.find(s => s.id === id);
            document.getElementById('current-subject-title').innerText = "Subject: " + sub.name;
            document.getElementById('add-q-btn').style.display = 'block';

            // Show and populate settings panel
            const settingsPanel = document.getElementById('subject-settings-panel');
            settingsPanel.style.display = 'block';
            document.getElementById('sub-duration').value = sub.duration || 30;

            renderSubjectList();
            renderQuestionList();
        }

        function updateSubjectSettings() {
            const sub = getActiveSubject();
            if (!sub) return;

            const newDuration = parseInt(document.getElementById('sub-duration').value);
            if (isNaN(newDuration) || newDuration < 1) {
                alert("Please enter a valid duration (minimum 1 minute).");
                return;
            }

            sub.duration = newDuration;
            saveDB();

            // Visual feedback
            const feedback = document.getElementById('settings-feedback');
            feedback.style.display = 'block';
            setTimeout(() => feedback.style.display = 'none', 2000);
        }

        // --- HELPERS ---
        function escapeHTML(str) {
            if (!str) return "";
            return str.replace(/[&<>"']/g, function (m) {
                switch (m) {
                    case '&': return '&amp;';
                    case '<': return '&lt;';
                    case '>': return '&gt;';
                    case '"': return '&quot;';
                    case "'": return '&#39;';
                    default: return m;
                }
            });
        }

        // --- TEACHER DASHBOARD LOGIC ---
        function getActiveSubject() {
            return SUBJECTS_DB.find(s => s.id === ACTIVE_SUBJECT_ID);
        }

        function renderQuestionList() {
            try {
                const container = document.getElementById('question-list-container');
                if (!container) return;

                const sub = getActiveSubject();
                if (!sub) {
                    container.innerHTML = '<p style="text-align: center; color: #999; padding: 2rem;">Please select a subject to manage questions.</p>';
                    return;
                }

                if (sub.questions.length === 0) {
                    container.innerHTML = '<p style="text-align:center; padding: 2rem; color: #666;">No questions found in this subject. Click "+ Add Question" to start.</p>';
                    return;
                }

                container.innerHTML = sub.questions.map((q, i) => {
                    const safeText = escapeHTML(q.text);
                    const safeOptions = q.options.map(opt => escapeHTML(opt)).join(', ');
                    const safeAnswer = q.options[q.answer] ? escapeHTML(q.options[q.answer]) : "Error: Invalid Index";

                    return `
                        <div class="q-list-item">
                            <div style="flex: 1; margin-right: 15px;">
                                <strong>${i + 1}. ${safeText}</strong>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
                                    Choices: ${safeOptions} | <span style="color: var(--success-color); font-weight:bold;">Ans: ${safeAnswer}</span>
                                </div>
                            </div>
                            <div class="q-actions">
                                <button class="badge-btn edit-btn" onclick="showQuestionForm(${i})">Edit</button>
                                <button class="badge-btn del-btn" onclick="deleteQuestion(${i})">Del</button>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (err) {
                console.error("Render Error:", err);
                alert("Error rendering questions. Some data might be corrupted.");
            }
        }

        function showQuestionForm(index = -1) {
            console.log("Opening Question Form. Index:", index);
            try {
                document.getElementById('q-form-overlay').style.display = 'flex';
                const title = document.getElementById('q-form-title');
                const qText = document.getElementById('q-text');
                const choices = document.querySelectorAll('#choices-container .q-choice');
                const correct = document.getElementById('q-correct');
                const editIndexField = document.getElementById('edit-q-index');

                const sub = getActiveSubject();
                if (!sub) return;

                if (index > -1 && sub.questions[index]) {
                    title.innerText = "Edit Question";
                    const q = sub.questions[index];
                    qText.value = q.text;
                    choices.forEach((input, i) => {
                        input.value = q.options[i] || "";
                    });
                    correct.value = q.answer;
                    editIndexField.value = index;
                } else {
                    title.innerText = "Add Question";
                    qText.value = "";
                    choices.forEach(c => c.value = "");
                    correct.value = 0;
                    editIndexField.value = -1;
                }
            } catch (err) {
                alert("Error opening form: " + err.message);
            }
        }

        function hideQuestionForm() {
            document.getElementById('q-form-overlay').style.display = 'none';
        }

        function saveQuestion() {
            console.log("Saving Question...");
            try {
                const text = document.getElementById('q-text').value.trim();
                const choices = Array.from(document.querySelectorAll('#choices-container .q-choice')).map(c => c.value.trim());
                const correct = parseInt(document.getElementById('q-correct').value);
                const editIndexValue = document.getElementById('edit-q-index').value;
                const editIndex = parseInt(editIndexValue);

                if (!text || choices.some(c => !c)) {
                    alert("Please fill in all fields (Question text and all 4 choices).");
                    return;
                }

                if (isNaN(correct) || correct < 0 || correct > 3) {
                    alert("Correct Choice Index must be between 0 and 3.");
                    return;
                }

                const questionData = {
                    id: Date.now(),
                    text: text,
                    options: choices,
                    answer: correct
                };

                const sub = getActiveSubject();
                if (!sub) {
                    alert("Error: No active subject selected.");
                    return;
                }

                if (editIndex >= 0 && editIndex < sub.questions.length) {
                    sub.questions[editIndex] = questionData;
                    alert("Question updated successfully!");
                } else {
                    sub.questions.push(questionData);
                    alert("New question added!");
                }

                saveDB();
                renderQuestionList();
                hideQuestionForm();
            } catch (err) {
                console.error("Save Error:", err);
                alert("Failed to save question: " + err.message);
            }
        }

        function deleteQuestion(index) {
            const sub = getActiveSubject();
            if (!sub) return;

            if (confirm("Delete this question?")) {
                sub.questions.splice(index, 1);
                saveDB();
                renderQuestionList();
            }
        }

        // --- PERSISTENCE & BACKUP FUNCTIONS ---
        function exportQuestionsJSON() {
            const sub = getActiveSubject();
            const dataToExport = sub ? sub.questions : SUBJECTS_DB;
            const filename = sub ? `quiz_${sub.name.replace(/\s+/g, '_')}_backup.json` : "quiz_database_full_backup.json";

            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(dataToExport, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", filename);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        }

        function importQuestionsJSON(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    const sub = getActiveSubject();

                    if (Array.isArray(imported)) {
                        if (sub) {
                            if (confirm(`Import ${imported.length} questions into "${sub.name}"? This will replace current questions in this subject.`)) {
                                sub.questions = imported;
                                saveDB();
                                renderQuestionList();
                                alert("Import successful!");
                            }
                        } else {
                            if (confirm(`Importing full database (${imported.length} subjects)? This will replace EVERYTHING.`)) {
                                SUBJECTS_DB = imported;
                                saveDB();
                                renderSubjectList();
                                alert("Database imported successfully!");
                            }
                        }
                    } else {
                        alert("Invalid file format.");
                    }
                } catch (err) {
                    alert("Error reading file: " + err.message);
                }
            };
            reader.readAsText(file);
        }

        function downloadUpdatedApp() {
            // Get current full HTML
            let html = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;

            const dbString = JSON.stringify(SUBJECTS_DB, null, 2);

            // Replace DEFAULT_SUBJECTS in code
            const regex = /const DEFAULT_SUBJECTS = \[[\s\S]*?\];/;
            const replacement = `const DEFAULT_SUBJECTS = ${dbString};`;

            if (regex.test(html)) {
                html = html.replace(regex, replacement);

                const blob = new Blob([html], { type: "text/html" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "Secure_Quiz_Portal_MultiSubject.html";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                alert("Updated App Downloaded! Your multi-subject database is now pre-installed in this new file.");
            } else {
                alert("Error: Could not locate database in code for replacement.");
            }
        }

        // --- ANTI-RETAKEE CHECK ---
        window.addEventListener('load', () => {
            // Simply show portal on load
            showPortal();

            // Register Service Worker for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(() => console.log('Service Worker Registered'))
                    .catch(err => console.error('Service Worker Failed', err));
            }
        });

        function showAlreadySubmitted(data) {
            document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
            document.getElementById('already-submitted-section').style.display = 'block';

            document.getElementById('previous-score-info').innerHTML = `
                <p><strong>Name:</strong> ${data.name}</p>
                <p><strong>Subject:</strong> ${data.subject}</p>
                <p><strong>Score:</strong> ${data.score} / ${data.total}</p>
                <p><strong>Date:</strong> ${new Date(data.timestamp).toLocaleString()}</p>
            `;
        }

        function attemptRetakeUnlock() {
            const codeInput = document.getElementById('retakeUnlockCode');
            const errorMsg = document.getElementById('retake-error');
            const UNLOCK_CODE = "qwe123";

            if (codeInput.value === UNLOCK_CODE) {
                if (confirm("This will delete the previous record and allow a fresh attempt. Proceed?")) {
                    localStorage.removeItem('exam_submission');
                    location.reload(); // Refresh to start clean
                }
            } else {
                errorMsg.style.display = 'block';
                codeInput.style.borderColor = "var(--error-color)";
            }
        }

        // --- FULLSCREEN ENFORCEMENT ---
        // Browser triggers fullscreen when the student clicks 'Start Exam'
        function enterFullscreen() {
            const doc = window.document.documentElement;
            try {
                if (doc.requestFullscreen) {
                    doc.requestFullscreen().catch(() => { });
                } else if (doc.mozRequestFullScreen) {
                    doc.mozRequestFullScreen().catch(() => { });
                } else if (doc.webkitRequestFullscreen) {
                    doc.webkitRequestFullscreen().catch(() => { });
                } else if (doc.msRequestFullscreen) {
                    doc.msRequestFullscreen().catch(() => { });
                }
            } catch (err) {
                console.error("Fullscreen failed:", err);
            }
        }

        // Force return to fullscreen if exited
        function forceFullscreen() {
            if (!isExamActive) return;
            if (!document.fullscreenElement &&
                !document.webkitFullscreenElement &&
                !document.mozFullScreenElement &&
                !document.msFullscreenElement) {
                enterFullscreen();
            }
        }

        // --- EXAM START LOGIC ---
        function startExam() {
            const nameInput = document.getElementById('fullName');
            const gradeInput = document.getElementById('gradeSection');
            const subjectSelect = document.getElementById('subjectSelect');

            const name = nameInput.value.trim();
            const grade = gradeInput.value.trim();
            const subjectId = subjectSelect.value;

            if (!name || !grade || !subjectId) {
                alert("Please fill in all fields.");
                return;
            }

            const subjectObj = SUBJECTS_DB.find(s => s.id === subjectId);
            if (!subjectObj || subjectObj.questions.length === 0) {
                alert("This subject has no questions yet.");
                return;
            }

            // Clone questions for this attempt
            QUESTIONS = JSON.parse(JSON.stringify(subjectObj.questions));
            studentInfo = { name, grade, subject: subjectObj.name };

            // Initialize/Prime Audio Context
            initAudio();

            // Set duration for this exam
            const durationMins = subjectObj.duration || 30;
            timeRemaining = durationMins * 60;
            document.getElementById('timer').innerText = `${durationMins.toString().padStart(2, '0')}:00`;

            // Randomized order for every attempt
            shuffleQuestionsAndChoices();

            // Enter Fullscreen immediately upon interaction
            enterFullscreen();

            // Transition UI
            document.getElementById('reg-section').style.display = 'none';
            document.getElementById('exam-section').style.display = 'block';

            isExamActive = true;
            renderQuestion();
            startTimer();
            initSecurity();

            // Push an extra state to history to trap the first back button click
            window.history.pushState({ examStarted: true }, "", window.location.href);
        }

        // --- SECURITY & LOCKDOWN LOGIC ---
        function initSecurity() {
            // Disable Right-Click (Context Menu)
            document.addEventListener('contextmenu', e => e.preventDefault());

            // Block Copy, Paste, Cut, and Drag
            document.addEventListener('copy', e => e.preventDefault());
            document.addEventListener('paste', e => e.preventDefault());
            document.addEventListener('cut', e => e.preventDefault());
            document.addEventListener('dragstart', e => e.preventDefault());

            // --- AGGRESSIVE BACK BUTTON TRAP (History API) ---
            window.addEventListener('popstate', function (event) {
                if (isExamActive) {
                    window.history.pushState({ examStarted: true }, "", window.location.href);
                    triggerLock("Action blocked: Navigation attempted.");
                }
            });

            // Maintain history stack depth
            setInterval(() => {
                if (isExamActive) {
                    if (!window.history.state || !window.history.state.examStarted) {
                        window.history.pushState({ examStarted: true }, "", window.location.href);
                    }
                }
            }, 500);

            // Disable Keyboard Shortcuts
            document.addEventListener('keydown', function (e) {
                // Common forbidden keys
                const blockKeys = ['F12', 'F11', 'Escape', 'Delete', 'End', 'PageUp', 'PageDown', 'Home', 'PrintScreen'];
                if (blockKeys.includes(e.key) || blockKeys.includes(e.code)) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    triggerLock(`Forbidden key (${e.key}) detected.`);
                    return false;
                }

                // Ctrl/Cmd based shortcuts
                if (e.ctrlKey || e.metaKey) {
                    const forbidden = ['r', 't', 'w', 'n', 'p', 's', 'u', 'i', 'j', 'd', 'k', 'l', 'v', 'c', 'x'];
                    if (forbidden.includes(e.key.toLowerCase())) {
                        e.preventDefault();
                        e.stopImmediatePropagation();
                        triggerLock(`Shortcut ${e.key} blocked.`);
                        return false;
                    }

                    // Ctrl+Shift combinations
                    if (e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C' || e.key === 'T')) {
                        e.preventDefault();
                        e.stopImmediatePropagation();
                        triggerLock("DevTools or Tab shortcut detected.");
                        return false;
                    }
                }

                // Alt key combinations (Alt+Tab, Alt+F4 etc)
                if (e.altKey) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    triggerLock("System shortcut (Alt) detected.");
                    return false;
                }

                // Windows / Cmd key
                if (e.key === 'Meta' || e.key === 'OS' || e.key === 'Win') {
                    e.preventDefault();
                    triggerLock("System key pressed.");
                }
            }, true);

            // --- WINDOW BLUR DETECTION ---
            window.addEventListener('blur', function () {
                if (isExamActive) {
                    triggerLock("Focus lost! The exam window must remain active.");
                }
            });

            // --- TAB-SWITCH DETECTION ---
            document.addEventListener("visibilitychange", function () {
                if (document.visibilityState === 'hidden' && isExamActive) {
                    triggerLock("Tab switch or app minimization detected.");
                }
            });

            // --- FULLSCREEN PERSISTENCE ---
            const handleFullscreenChange = () => {
                if (isExamActive) {
                    const isFull = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;
                    if (!isFull) {
                        triggerLock("Fullscreen exited! Re-entry required.");
                        // Try to re-enter immediately if interaction happens
                        setTimeout(forceFullscreen, 100);
                    }
                }
            };

            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);

            // --- NAVIGATION LOCK ---
            window.onbeforeunload = function () {
                if (isExamActive) return "Navigation is locked during the exam.";
            };
        }

        // Display the warning overlay and lock the exam
        function triggerLock(reason) {
            if (!isExamActive) return;

            // Pause timer if active
            isExamActive = false;

            document.getElementById('lock-reason').innerText = reason;
            document.getElementById('warning-overlay').style.display = 'flex';

            // Provide tactile feedback (Vibration)
            if ("vibrate" in navigator) {
                navigator.vibrate([200, 100, 200]);
            }

            // Start Audible Siren
            startSiren();
        }

        // Allow student to return to exam if they enter the correct code
        function attemptRelock() {
            const codeInput = document.getElementById('unlockCode');
            const errorMsg = document.getElementById('unlock-error');
            const UNLOCK_CODE = "qwe123";

            if (codeInput.value === UNLOCK_CODE) {
                isExamActive = true;
                stopSiren(); // Stop the beeping
                enterFullscreen();
                document.getElementById('warning-overlay').style.display = 'none';
                codeInput.value = ""; // Clear for next time
                errorMsg.style.display = 'none';
            } else {
                errorMsg.style.display = 'block';
                codeInput.style.borderColor = "var(--error-color)";
            }
        }

        // --- EXAM ENGINE ---
        function renderQuestion() {
            const q = QUESTIONS[currentQuestionIndex];
            const container = document.getElementById('question-container');
            const ribbon = document.getElementById('navigation-ribbon');

            // Render Ribbon (Navigation numbers)
            ribbon.innerHTML = QUESTIONS.map((_, i) => `
                <div onclick="jumpToQuestion(${i})" style="
                    width: 30px; 
                    height: 30px; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    border-radius: 4px; 
                    cursor: pointer;
                    font-size: 0.8rem;
                    background-color: ${currentQuestionIndex === i ? 'var(--primary-color)' : (userAnswers[i] !== undefined ? '#c5cae9' : '#eee')};
                    color: ${currentQuestionIndex === i ? 'white' : '#333'};
                    border: ${currentQuestionIndex === i ? 'none' : '1px solid #ddd'};
                ">${i + 1}</div>
            `).join('');

            let html = `
                <div class="question-card">
                    <h2>Question ${currentQuestionIndex + 1} of ${QUESTIONS.length}</h2>
                    <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">${q.text}</p>
                    <div class="options">
                        ${q.options.map((opt, i) => `
                            <label class="option-label">
                                <input type="radio" name="option" value="${i}" ${userAnswers[currentQuestionIndex] === i ? 'checked' : ''} onchange="saveAnswer(${i})">
                                ${opt}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
            container.innerHTML = html;

            // Update button visibility and text
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');

            prevBtn.style.visibility = (currentQuestionIndex === 0) ? 'hidden' : 'visible';

            if (currentQuestionIndex === QUESTIONS.length - 1) {
                nextBtn.innerText = "Submit Exam";
            } else {
                nextBtn.innerText = "Next Question";
            }
        }

        function saveAnswer(answerIndex) {
            userAnswers[currentQuestionIndex] = answerIndex;
            renderQuestion(); // Re-render to update ribbon colors
        }

        function nextQuestion() {
            if (currentQuestionIndex < QUESTIONS.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                // Check if all questions are answered
                const answeredCount = userAnswers.filter(a => a !== undefined).length;
                if (answeredCount < QUESTIONS.length) {
                    if (!confirm(`You have only answered ${answeredCount} out of ${QUESTIONS.length} questions. Submit anyway?`)) {
                        return;
                    }
                }
                submitExam();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            renderQuestion();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (!isExamActive) return; // Don't tick while locked

                timeRemaining--;
                let mins = Math.floor(timeRemaining / 60);
                let secs = timeRemaining % 60;
                document.getElementById('timer').innerText =
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert("Time is up! Submitting your exam.");
                    submitExam();
                }
            }, 1000);
        }

        // --- SUBMISSION & RESULT SENDING ---
        function calculateScore() {
            let score = 0;
            QUESTIONS.forEach((q, i) => {
                if (userAnswers[i] === q.answer) score++;
            });
            return score;
        }

        function submitExam() {
            isExamActive = false;
            clearInterval(timerInterval);
            window.onbeforeunload = null; // Remove navigation lock

            // Push a final state to allow navigation once the exam is finished
            window.history.pushState({ examFinished: true }, "", window.location.href);

            const score = calculateScore();
            const total = QUESTIONS.length;

            document.getElementById('exam-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';

            document.getElementById('score-summary').innerHTML = `
                <p><strong>Name:</strong> ${studentInfo.name}</p>
                <p><strong>Grade & Section:</strong> ${studentInfo.grade}</p>
                <p><strong>Subject:</strong> ${studentInfo.subject}</p>
                <div style="margin: 2rem 0; padding: 1rem; background: #e8eaf6; border-radius: 8px;">
                    <p style="font-size: 1.2rem;">Your Final Score</p>
                    <p style="font-size: 3rem; font-weight: bold; color: var(--primary-color);">
                        ${score} / ${total}
                    </p>
                </div>
            `;

            // Anti-Retake: Save to LocalStorage
            const submissionData = {
                name: studentInfo.name,
                grade: studentInfo.grade,
                subject: studentInfo.subject,
                score: score,
                total: total,
                timestamp: Date.now()
            };
            localStorage.setItem('exam_submission', JSON.stringify(submissionData));

            // Exit Fullscreen mode upon completion
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.mozCancelFullScreen) document.mozCancelFullScreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        }

        function sendResults() {
            const score = calculateScore();
            const total = QUESTIONS.length;

            // Format message for Messenger
            const msg = `Name: ${studentInfo.name} \nGrade & Section: ${studentInfo.grade} \nSubject: ${studentInfo.subject} \nScore: ${score} / ${total}`;
            const encodedMsg = encodeURIComponent(msg);

            // Use the provided Messenger link template
            const messengerLink = `https://m.me/glnnxmrk?text=${encodedMsg}`;

            // Open Messenger in a new tab
            window.open(messengerLink, '_blank');
        }

        // --- PDF EXPORT LOGIC ---
        function downloadPDF() {
            const score = calculateScore();
            const total = QUESTIONS.length;
            const now = new Date().toLocaleString();

            const element = document.createElement('div');
            element.style.padding = '20px';
            element.style.fontFamily = 'Arial, sans-serif';

            // Generate Questions & Answers HTML
            const qaHtml = QUESTIONS.map((q, i) => {
                const userAnswerIndex = userAnswers[i];
                const isCorrect = userAnswerIndex === q.answer;
                const studentAnswerText = userAnswerIndex !== undefined ? q.options[userAnswerIndex] : "No Answer";
                const correctAnswerText = q.options[q.answer];

                return `
                    <div style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                        <p style="margin: 0; font-weight: bold;">Q${i + 1}: ${q.text}</p>
                        <p style="margin: 5px 0 0 0; color: ${isCorrect ? '#2e7d32' : '#c62828'};">
                            <strong>Your Answer:</strong> ${studentAnswerText} ${isCorrect ? '‚úÖ' : '‚ùå'}
                        </p>
                        ${!isCorrect ? `<p style="margin: 2px 0 0 0; font-size: 0.9rem; color: #666;"><strong>Correct Answer:</strong> ${correctAnswerText}</p>` : ''}
                    </div>
                `;
            }).join('');

            element.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h1 style="color: #1a237e; border-bottom: 2px solid #1a237e; display: inline-block; padding-bottom: 10px;">
                        Examination Detailed Report
                    </h1>
                </div>

                <table style="width: 100%; margin-bottom: 20px; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 5px; border: 1px solid #ddd;"><strong>Name:</strong></td>
                        <td style="padding: 5px; border: 1px solid #ddd;">${studentInfo.name}</td>
                        <td style="padding: 5px; border: 1px solid #ddd;"><strong>Grade & Sec:</strong></td>
                        <td style="padding: 5px; border: 1px solid #ddd;">${studentInfo.grade}</td>
                    </tr>
                    <tr>
                        <td style="padding: 5px; border: 1px solid #ddd;"><strong>Subject:</strong></td>
                        <td style="padding: 5px; border: 1px solid #ddd;">${studentInfo.subject}</td>
                        <td style="padding: 5px; border: 1px solid #ddd;"><strong>Date/Time:</strong></td>
                        <td style="padding: 5px; border: 1px solid #ddd;">${now}</td>
                    </tr>
                </table>

                <div style="margin-bottom: 30px; padding: 15px; background: #e8eaf6; border-radius: 8px; text-align: center;">
                    <p style="font-size: 1.1rem; margin-bottom: 5px;">Final Performance</p>
                    <p style="font-size: 2rem; font-weight: bold; color: #1a237e; margin: 0;">
                        Score: ${score} / ${total} (${((score / total) * 100).toFixed(2)}%)
                    </p>
                </div>

                <div style="margin-top: 20px;">
                    <h2 style="font-size: 1.2rem; color: #333; border-left: 5px solid #1a237e; padding-left: 10px; margin-bottom: 15px;">
                        Question Breakdown
                    </h2>
                    ${qaHtml}
                </div>

                <div style="margin-top: 50px; display: flex; justify-content: space-between; align-items: flex-end;">
                    <div style="text-align: center; width: 45%;">
                        <div style="border-bottom: 1px solid #000; width: 100%; height: 20px;"></div>
                        <p style="margin-top: 5px; font-weight: bold;">Student Signature</p>
                    </div>
                    <div style="text-align: center; width: 45%;">
                        <div style="border-bottom: 1px solid #000; width: 100%; height: 20px;"></div>
                        <p style="margin-top: 5px; font-weight: bold;">Parent/Guardian Signature</p>
                    </div>
                </div>

                <div style="margin-top: 40px; border-top: 1px solid #ddd; padding-top: 10px; font-size: 0.8rem; color: #666; text-align: center;">
                    <p>Security ID: ${btoa(studentInfo.name + studentInfo.subject + Date.now()).substring(0, 16).toUpperCase()}</p>
                    <p>¬© 2026 Quarter Examination Secure Portal</p>
                </div>
            `;

            const opt = {
                margin: 10,
                filename: `Detailed_Exam_Result_${studentInfo.name.replace(/\s+/g, '_')}_${studentInfo.subject}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            alert("Preparing your detailed PDF report. This may take a moment. Do not exit this page!...");
            html2pdf().set(opt).from(element).save();
        }
    </script>







</body></html>
